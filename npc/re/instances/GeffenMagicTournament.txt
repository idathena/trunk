//===== rAthena Script =======================================
//= Geffen Magic Tournament
//===== By: ==================================================
//= Tokeiburu, Nova, Diablo, MasterOfMuppets, etc.
//===== Current Version: =====================================
//= 1.0
//===== Compatible With: =====================================
//= rAthena SVN
//===== Description: =========================================
//= [Official Conversion]
//= Geffen Magic Tournament Instance
//===== Additional Comments: =================================
//= 1.0 First version, edited. [exneval]
//============================================================

// Instance enter
//============================================================
dali,98,141,3	script	Emmitt White	4_M_KHKYEL,{
	.@n$ = "[Time Travel Researcher]";
	if (BaseLevel < 90) {
		mes .@n$;
		mes "You must be base level 90 to continue.";
		close;
	}
	if (checkquest(9309) != -1) {
		mes .@n$;
		mes "I see that you've returned from the Tournament.";
		mes "Did you find out anything interesting?";
		next;
		mes .@n$;
		mes "You give details of your experience to the researcher.";
		next;
		mes .@n$;
		mes "You didn't really give me any information that I didn't already know...";
		next;
		mes .@n$;
		mes "But I still want more~!";
		mes "Can you help me tomorrow?";
		mes "I will be waiting for you.";
		next;
		for (.@i = 9284; .@i <= 9314; .@i++) {
			if (checkquest(.@i) != -1)
				erasequest .@i;
		}
		changequest 9315,9316;
	}
	if (checkquest(9308) != -1) {
		mes .@n$;
		mes "I can't believe you won the Tournament!";
		next;
		mes .@n$;
		mes "But I still want more~!";
		mes "Can you help me tomorrow?";
		mes "I will be waiting for you.";
		next;
		for (.@i = 9284; .@i <= 9314; .@i++) {
			if (checkquest(.@i) != -1)
				erasequest .@i;
		}
		changequest 9315,9316;
	}
	.@party_id = getcharid(1);
	getpartymember(.@party_id,0);
	set .@GPPartySize,$@partymembercount;
	if (!.@party_id || getcharid(3) != getpartyleader(.@party_id,1) || .@GPPartySize > 1) {
		mes .@n$;
		mes "This is a solo instance. Please form a solo party before continuing.";
		close;
	}
	if (GeffenTournament < gettimetick(2)) { //23 Hour Cooldown
		.@p_name$ = getpartyname(.@party_id);
		.@md_name$ = "Geffen Magic Tournament";
		if (!.@party_id || getcharid(0) != getpartyleader(.@party_id,2)) {
			mes .@n$;
			mes "You need to be a party leader in order to continue.";
			close;
		} else {
			mes .@n$;
			mes "Did you know?";
			mes "A long time ago there was a Magic Tournament in Geffen.";
			next;
			mes .@n$;
			mes "I've done so much research on the Tournament but haven't gotten too much information from research alone.";
			next;
			mes .@n$;
			mes "When I found out that this time gap can help with my research I couldn't resist the opportunity to continue the research.";
			next;
			mes .@n$;
			mes "And now I've found an adventurer, in you, who can help me go back to the time that the Tournament took place.";
			next;
			mes .@n$;
			mes "Please use the dimensional device and participate in the Magic Tournament for me.";
			next;
			mes .@n$;
			mes "Will you go and tell me about it?";
			next;
			mes .@n$;
			mes "The portal is unstable so you have to go solo.";
			mes "Are you ready to enter?";
			next;
			switch (select("No:Yes")) {
				case 1:
					mes .@n$;
					mes "Come back if you change your mind~!";
					close;
				case 2:
					if (instance_create(.@md_name$) < 0) {
						mes "Party Name: "+.@p_name$;
						mes "Party Leader: "+strcharinfo(0);
						mes "^0000ff"+.@md_name$+" ^000000- Reservation Failed!";
					} else {
						mes .@n$;
						mes "The Dimensional Device has been activated.";
					}
					close;
			}
		}
	} else {
		mes .@n$;
		mes "Just a second.";
		mes "You need to wait for the timer to expire before going back.";
		mes " ";
		.@time = (GeffenTournament - gettimetick(2));
		.@sec = .@time % 60;
		.@min = (.@time / 60) % 60;
		.@hrs = (.@time / 3600) % 24;
		mes "Cooldown: ^3355FF"+(.@hrs < 10 ? "0" : "")+.@hrs+":"+(.@min < 10 ? "0" : "")+.@min+":"+(.@sec < 10 ? "0" : "")+.@sec+"^000000";
		close;
	}
}

dali,100,147,3	script	Dimensional Device#gefma	PORTAL,{
	.@n$ = "[Dimensional Device]";
	.@ins_geffen_time = checkquest(9316,PLAYTIME);
	if (GeffenTournament < gettimetick(2)) {
		.@party_id = getcharid(1);
		.@p_name$ = getpartyname(.@party_id);
		.@md_name$ = "Geffen Magic Tournament";
		getpartymember(.@party_id,0);
		set .@GPPartySize,$@partymembercount;
		if (!.@party_id || getcharid(3) != getpartyleader(.@party_id,1) || .@GPPartySize > 1) {
			mes .@n$;
			mes "This is a solo instance. Please form a solo party before continuing.";
			close;
		}
		switch (select("Leave it alone:^3355FFUse the Device^000000")) {
			case 1:
				mes .@n$;
				mes "You can feel time being distorted by the device.";
				close;
			case 2:
				if (BaseLevel < 90) {
					mes .@n$;
					mes "You must be base level 90 to continue.";
					close;
				}
				switch (instance_enter(.@md_name$)) {
					case 3:
						mes "An unknown error has occurred.";
						close;
					case 2:
						mes "The Geffen Magic Tournament instance has not been created. Please go to talk to Emmitt White first.";
						close;
					case 1:
						mes "Only registered members can enter the "+.@md_name$+" instance.";
						close;
					case 0:
						mapannounce "dali02",strcharinfo(0)+" of the party,"+.@p_name$+" is entering the "+.@md_name$+".",bc_map,"0x00ff99";
						GeffenTournament = gettimetick(2)+82800;
						if (.@ins_geffen_time != -1)
							erasequest 9316;
						setquest 9315;
						end;
				}
				break;
		}
	} else {
		mes .@n$;
		mes "Looks like the window of opportunity is not open right now.";
		close;
	}
}

// Instance start
//============================================================
1@gef,119,208,0	script	#GefMagicStart	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch_:
	setquest 9292;
	'charname$ = strcharinfo(0);
	'sex = Sex;
	'gmt_account_id = getcharid(3);
	donpcevent instance_npcname("#GefMagicStart")+"::OnDisable";
	.@map$ = instance_mapname("1@gef");
	mapannounce .@map$,"Geffen Broadcast: The Geffen Magic Tournament is about to begin!",bc_blue;
	sleep 3000;
	mapannounce .@map$,"Geffen Broadcast: Citizens and adventurers in Geffen, please join the tournament~!",bc_blue;
	sleep 5000;
	mapannounce .@map$,"Geffen Broadcast: Anyone who wants to join the Geffen Magic Tournament, please come to the southern fountain of Geffen~!",bc_blue;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,120,78,0	script	#GefMagicGuess0	HIDDEN_WARP_NPC,4,1,{
	end;
OnTouch_:
	unittalk 'gmt_account_id,'charname$+": Guess this is where I register for the tournament...";
	for (.@i = 0; .@i < 3; .@i++)
		donpcevent instance_npcname("#GefMagicGuess"+.@i)+"::OnDisable";
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,142,53,0	duplicate(#GefMagicGuess0)	#GefMagicGuess1	HIDDEN_WARP_NPC,1,15
1@gef,99,53,0	duplicate(#GefMagicGuess0)	#GefMagicGuess2	HIDDEN_WARP_NPC,1,20

1@gef,71,86,4	script	Young Lady#gef1	4_F_BRZ_WOMAN,{
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,75,82,4	duplicate(Young Lady#gef1)	Young Lady#gef3	4_F_03
1@gef,73,84,4	duplicate(Young Lady#gef1)	Young Lady#gef2	4_F_CAPEGIRL

1@gef,68,79,6	script	Handsome Adventurer#gef	4_M_CRU,{
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,70,77,2	duplicate(Handsome Adventurer#gef)	Male Adventurer#gef	4_M_LGTMAN

1@gef,73,84,0	script	MOVIECONTROL#gef	HIDDEN_WARP_NPC,13,13,{
	end;
OnTouch_:
	donpcevent instance_npcname("MOVIECONTROL#gef")+"::OnDisable";
	'm1_timer = 0;
	initnpctimer;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnTimer1000:
	'm1_timer++;
	switch ('m1_timer) {
		case   1: npctalk "I am lonely... Should I be alone during the festival?",instance_npcname("Young Lady#gef1"); break;
		case   4: npctalk "Oh my god ~! Why do you say that~?",instance_npcname("Young Lady#gef2"); break;
		case   8: npctalk "How about hitting on the handsome adventurers coming to Geffen?",instance_npcname("Young Lady#gef3"); break;
		case  12: npctalk "Handsome? Where are there handsome men?",instance_npcname("Young Lady#gef1"); break;
		case  17: npctalk "I only see guys who look so old and fat!",instance_npcname("Young Lady#gef1"); break;
		case  21: npctalk "Agh... I can not just sit around during this festival alone...",instance_npcname("Young Lady#gef2"); break;
		case  26: npctalk "No! There has to be some handsome guys around here! Don't give up!",instance_npcname("Young Lady#gef3"); break;
		case  30:
			npctalk "Um... okay...",instance_npcname("Young Lady#gef1");
			npctalk "Um... okay...",instance_npcname("Young Lady#gef2");
			break;
		case  34: npctalk "See! Look over there! A handsome guy!",instance_npcname("Young Lady#gef3"); break;
		case  38:
			npctalk "Oh god! Where?!",instance_npcname("Young Lady#gef1");
			npctalk "Oh my god! Where? Where?",instance_npcname("Young Lady#gef2");
			break;
		case  42:
			donpcevent instance_npcname("Handsome Adventurer#gef")+"::OnEnable";
			npctalk "Over there~!",instance_npcname("Young Lady#gef3");
			break;
		case  46: npctalk "There are many beautiful ladies at this year's Magic Tournament.",instance_npcname("Handsome Adventurer#gef"); break;
		case  50:
			npctalk "Yikes~~~!!",instance_npcname("Young Lady#gef1");
			npctalk "Yikes~~~! Is he talking about me?",instance_npcname("Young Lady#gef2");
			npctalk "Yikes~~! Nice!!",instance_npcname("Young Lady#gef3");
			break;
		case  54: npctalk "What should I do? Should I talk to him?",instance_npcname("Young Lady#gef3"); break;
		case  58: npctalk "Come on~! You're good at this! Hurry up and hook up with him!",instance_npcname("Young Lady#gef2"); break;
		case  62: npctalk "Hurry up~!",instance_npcname("Young Lady#gef1"); break;
		case  66: npctalk "It's almost time for the event to begin...",instance_npcname("Handsome Adventurer#gef"); break;
		case  70: npctalk "Maybe he's waiting for someone!",instance_npcname("Young Lady#gef3"); break;
		case  74: npctalk "A girlfriend?! It can't be!",instance_npcname("Young Lady#gef2"); break;
		case  78:
			donpcevent instance_npcname("Male Adventurer#gef")+"::OnEnable";
			npctalk "No... it can't be~!",instance_npcname("Young Lady#gef1");
			break;
		case  79: npctalk "Have I kept you waiting for a long time?",instance_npcname("Male Adventurer#gef"); break;
		case  83: npctalk "Lucky! It's a man!!!",instance_npcname("Young Lady#gef3"); break;
		case  86:
			npctalk "Looks like it's just a friend~!!",instance_npcname("Young Lady#gef2");
			break;
		case  88: npctalk "Hook up with both of them? Ho ho ho~!",instance_npcname("Young Lady#gef1"); break;
		case  91:
			npctalk "Yes! You have finally arrived, my love!",instance_npcname("Handsome Adventurer#gef");
			emotion e_omg,getnpcid(0,instance_npcname("Young Lady#gef1"));
			emotion e_omg,getnpcid(0,instance_npcname("Young Lady#gef2"));
			emotion e_omg,getnpcid(0,instance_npcname("Young Lady#gef3"));
			break;
		case  95:
			npctalk "My love...",instance_npcname("Male Adventurer#gef");
			emotion e_lv,getnpcid(0,instance_npcname("Male Adventurer#gef"));
			emotion e_lv,getnpcid(0,instance_npcname("Handsome Adventurer#gef"));
			emotion e_lv,getnpcid(0,instance_npcname("Handsome Adventurer#gef"));
			break;
		case  99:
			npctalk "Maybe... There are no good guys left for us...",instance_npcname("Young Lady#gef3");
			emotion e_lv,getnpcid(0,instance_npcname("Handsome Adventurer#gef"));
			break;
		case 103:
			npctalk "Ahem... Maybe... Just the three of us... will be together forever...",instance_npcname("Young Lady#gef2");
			emotion e_lv,getnpcid(0,instance_npcname("Male Adventurer#gef"));
			break;
		case 106:
			npctalk "Our friendship is forever~!!!",instance_npcname("Young Lady#gef3");
			emotion e_lv,getnpcid(0,instance_npcname("Handsome Adventurer#gef"));
			sleep 500;
			npctalk "Our friendship is forever~!!!",instance_npcname("Young Lady#gef1");
			sleep 500;
			npctalk "Our friendship is forever~!!!",instance_npcname("Young Lady#gef2");
			'm1_timer++;
			break;
		case 109:
			emotion e_lv,getnpcid(0,instance_npcname("Male Adventurer#gef"));
			emotion e_sob,getnpcid(0,instance_npcname("Young Lady#gef1"));
			emotion e_sob,getnpcid(0,instance_npcname("Young Lady#gef2"));
			emotion e_sob,getnpcid(0,instance_npcname("Young Lady#gef3"));
			break;
		case 111: emotion e_lv,getnpcid(0,instance_npcname("Handsome Adventurer#gef")); break;
		case 113: emotion e_lv,getnpcid(0,instance_npcname("Male Adventurer#gef")); break;
		case 115: emotion e_lv,getnpcid(0,instance_npcname("Handsome Adventurer#gef")); break;
		case 118:
			donpcevent instance_npcname("Male Adventurer#gef")+"::OnDisable";
			donpcevent instance_npcname("Handsome Adventurer#gef")+"::OnDisable";
			donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
			stopnpctimer;
			end;
	}
	initnpctimer;
	end;
}

1@gef,90,197,0	script	#Firecrackers0	HIDDEN_WARP_NPC,{
	end;
OnTimer2500:
	stopnpctimer;
	if (rand(0,1))
		specialeffect .effects[rand(getarraysize(.effects))],AREA,instance_npcname(strnpcinfo(0));
	initnpctimer;
	end;
OnInstanceInit:
	setarray .effects[0],EF_FIREPILLARBOMB,EF_FLAMELAUNCHER,EF_FROSTDIVER2,EF_FROSTWEAPON,EF_LIGHTBOLT,EF_LIGHTNINGLOADER,EF_MAGICROD,EF_METEORSTORM,EF_NAPALMBEAT;
	setarray .effects[9],EF_PETRIFYATTACK,EF_SEISMICWEAPON,EF_SIGHT,EF_SIGHTRASHER,EF_SPELLBREAKER,EF_STORMGUST,EF_THUNDERSTORM,EF_VOLCANO,EF_WATERBALL,EF_YUFITELHIT;
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	initnpctimer;
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,106,145,0	duplicate(#Firecrackers0)	#Firecrackers1	HIDDEN_WARP_NPC
1@gef,112,49,0	duplicate(#Firecrackers0)	#Firecrackers2	HIDDEN_WARP_NPC
1@gef,134,145,0	duplicate(#Firecrackers0)	#Firecrackers3	HIDDEN_WARP_NPC
1@gef,132,111,0	duplicate(#Firecrackers0)	#Firecrackers4	HIDDEN_WARP_NPC
1@gef,141,56,0	duplicate(#Firecrackers0)	#Firecrackers5	HIDDEN_WARP_NPC
1@gef,146,175,0	duplicate(#Firecrackers0)	#Firecrackers6	HIDDEN_WARP_NPC
1@gef,182,163,0	duplicate(#Firecrackers0)	#Firecrackers7	HIDDEN_WARP_NPC
1@gef,183,126,0	duplicate(#Firecrackers0)	#Firecrackers8	HIDDEN_WARP_NPC
1@gef,194,89,0	duplicate(#Firecrackers0)	#Firecrackers9	HIDDEN_WARP_NPC
1@gef,59,125,0	duplicate(#Firecrackers0)	#Firecrackers10	HIDDEN_WARP_NPC
1@gef,62,147,0	duplicate(#Firecrackers0)	#Firecrackers11	HIDDEN_WARP_NPC
1@gef,62,91,0	duplicate(#Firecrackers0)	#Firecrackers12	HIDDEN_WARP_NPC
1@gef,71,181,0	duplicate(#Firecrackers0)	#Firecrackers13	HIDDEN_WARP_NPC
1@gef,112,196,0	duplicate(#Firecrackers0)	#Firecrackers14	HIDDEN_WARP_NPC
1@gef,98,58,0	duplicate(#Firecrackers0)	#Firecrackers15	HIDDEN_WARP_NPC
1@gef,98,126,0	duplicate(#Firecrackers0)	#Firecrackers16	HIDDEN_WARP_NPC
1@gef,127,196,0	duplicate(#Firecrackers0)	#Firecrackers17	HIDDEN_WARP_NPC
1@gef,40,125,0	duplicate(#Firecrackers0)	#Firecrackers18	HIDDEN_WARP_NPC
1@gef,116,75,0	duplicate(#Firecrackers0)	#Firecrackers19	HIDDEN_WARP_NPC
1@gef,58,112,0	duplicate(#Firecrackers0)	#Firecrackers20	HIDDEN_WARP_NPC
1@gef,40,112,0	duplicate(#Firecrackers0)	#Firecrackers21	HIDDEN_WARP_NPC
1@gef,107,111,0	duplicate(#Firecrackers0)	#Firecrackers22	HIDDEN_WARP_NPC
1@gef,127,49,0	duplicate(#Firecrackers0)	#Firecrackers23	HIDDEN_WARP_NPC
1@gef,123,75,0	duplicate(#Firecrackers0)	#Firecrackers24	HIDDEN_WARP_NPC
1@gef,199,126,0	duplicate(#Firecrackers0)	#Firecrackers25	HIDDEN_WARP_NPC
1@gef,183,113,0	duplicate(#Firecrackers0)	#Firecrackers26	HIDDEN_WARP_NPC
1@gef,199,114,0	duplicate(#Firecrackers0)	#Firecrackers27	HIDDEN_WARP_NPC
1@gef,140,126,0	duplicate(#Firecrackers0)	#Firecrackers28	HIDDEN_WARP_NPC

1@gef_in,77,167,0	shop	Tool Dealer#gefa_0et	1_F_03,1750:-1,611:-1,501:-1,502:-1,503:-1,504:-1,645:-1,656:-1,713:-1,601:-1,602:-1,2241:-1
1@gef_in,77,173,0	shop	Trader#gef_0et	1_M_WIZARD,717:-1,1601:-1,1604:-1,1607:-1,1610:-1,2232:-1,2321:-1,2332:-1
1@gef_in,74,144,0	shop	Trader#gef_0et1	1_F_01,911:-1,910:-1,912:-1
1@gef_in,65,144,4	shop	Tool Dealer#gefb_0et1	1_M_WIZARD,1092:-1,1093:-1,713:-1

1@gef_in,22,171,7	shop	Weapon Dealer#GMT	84,1146:-1,1245:-1
1@gef_in,26,178,4	shop	Armor Dealer#GMT	66,2628:-1,2101:-1,2107:-1,2401:-1,2501:-1,2230:-1,2301:-1,2303:-1,2305:-1,2321:-1,2332:-1
1@gef_in,30,178,4	shop	Weapon Dealer#GMT2	47,1750:-1,1751:-1,1101:-1,1701:-1,1201:-1,1204:-1,1207:-1,1210:-1,1213:-1,1216:-1,1601:-1,1604:-1,1607:-1,1610:-1

1@gef,193,152,4	shop	Pet Groomer#GMT	124,537:-1,643:-1,10013:-1,10014:-1,6113:-1,6114:-1,6115:-1,6110:-1,6100:-1,6098:-1,6112:-1,6104:-1,6108:-1,6111:-1,7824:1000,6097:1000,6107:1000
1@gef,196,111,3	shop	Cook#gef_0et	85,7482:-1

1@gef,131,58,4	script	Geffen Coin Operator#g	4_F_ZONDAGIRL,{
	.@n$ = "[Geffen Coin Operator]";
	mes .@n$;
	mes "I exchange Magic Tournament Coins for Equipment.";
	next;
	goto L_Menu;
	end;

L_Menu:
	switch (select("Shields:Rings:Armor:End Conversation")) {
		case 1:
			mes .@n$;
			mes "There are two types of Shields are available for exchange.";
			next;
L_Shield:
			switch (select("Magic Reflector ^3355FF<900 Coins>^000000:Revised Encyclopedia ^3355FF<900 Coins>^000000:Go back to previous menu")) {
				case 1: .@item = 2185; .@cost = 900; break; //Magic_Reflector
				case 2: .@item = 2186; .@cost = 900; break; //Encyclopedia_Revision
				case 3: goto L_Menu; break;
			}
			mes .@n$;
			mes "<ITEM>"+getitemname(.@item)+"<INFO>"+.@item+"</INFO></ITEM>";
			mes "Price is "+.@cost+" coins";
			mes "Do you wish to exchange your coins?";
			next;
			switch (select("Do Not Exchange:Exchange")) {
				case 1:
					mes .@n$;
					mes "Take a look at the other equipment available.";
					next;
					goto L_Shield;
					break;
				case 2:
					if (countitem(6671) < .@cost) {
						mes .@n$;
						mes "You need "+.@cost+" Geffen Magic Tournament Coins.";
						next;
						mes .@n$;
						mes "Participate in the Tournament to earn more coins.";
						mes "Do you need more help?";
						next;
						goto L_Shield;
					}
					if (!checkweight(.@item,1)) {
						mes .@n$;
						mes "You have too many things in your inventory to carry a ^FF0000"+getitemname(.@item)+"^000000.";
						end;
					}
					mes .@n$;
					mes "Thank you.";
					delitem 6671,.@cost; //Geffen_Magic_Coin
					getitem .@item,1;
					end;
			}
			break;
		case 2:
			mes .@n$;
			mes "There are two types of Rings are available for exchange.";
			next;
L_Ring:
			switch (select("Phyisical Enhancer Ring ^3355FF<1350 Coins>^000000:Magic Intensifier Ring ^3355FF<1350 Coins>^000000:Go back to previous menu")) {
				case 1: .@item = 2963; .@cost = 1350; break; //Body_Power_Up_Ring
				case 2: .@item = 2964; .@cost = 1350; break; //Ring_Of_Spell_Explosion
				case 3: goto L_Menu; break;
			}
			mes .@n$;
			mes "<ITEM>"+getitemname(.@item)+"<INFO>"+.@item+"</INFO></ITEM>";
			mes "Price is "+.@cost+" coins";
			mes "Do you wish to exchange your coins?";
			next;
			switch (select("Do Not Exchange:Exchange")) {
				case 1:
					mes .@n$;
					mes "Take a look at the other equipment available.";
					next;
					goto L_Ring;
					break;
				case 2:
					if (countitem(6671) < .@cost) {
						mes .@n$;
						mes "You need "+.@cost+" Geffen Magic Tournament Coins.";
						next;
						mes .@n$;
						mes "Participate in the Tournament to earn more coins.";
						mes "Do you need more help?";
						next;
						goto L_Ring;
					}
					if (!checkweight(.@item,1)) {
						mes .@n$;
						mes "You have too many things in your inventory to carry a ^FF0000"+getitemname(.@item)+"^000000.";
						end;
					}
					mes .@n$;
					mes "Thank you.";
					delitem 6671,.@cost; //Geffen_Magic_Coin
					getitem .@item,1;
					end;
			}
			break;
		case 3:
			mes .@n$;
			mes "There are two types of Armor are available for exchange.";
			next;
L_Armor:
			switch (select("Anti-Magic Suit ^3355FF<1800 Coins>^000000:Geffen Magic Robe ^3355FF<1800 Coins>^000000:Go back to previous menu")) {
				case 1: .@item = 15073; .@cost = 1800; break; //Anti_Magic_Suit
				case 2: .@item = 15074; .@cost = 1800; break; //Geffen_Mage_Robe
				case 3: goto L_Menu; break;
			}
			mes .@n$;
			mes "<ITEM>"+getitemname(.@item)+"<INFO>"+.@item+"</INFO></ITEM>";
			mes "Price is "+.@cost+" coins";
			mes "Do you wish to exchange your coins?";
			next;
			switch (select("Do Not Exchange:Exchange")) {
				case 1:
					mes .@n$;
					mes "Take a look at the other equipment available.";
					next;
					goto L_Armor;
					break;
				case 2:
					if (countitem(6671) < .@cost) {
						mes .@n$;
						mes "You need "+.@cost+" Geffen Magic Tournament Coins.";
						next;
						mes .@n$;
						mes "Participate in the Tournament to earn more coins.";
						mes "Do you need more help?";
						next;
						goto L_Armor;
					}
					if (!checkweight(.@item,1)) {
						mes .@n$;
						mes "You have too many things in your inventory to carry a ^FF0000"+getitemname(.@item)+"^000000.";
						end;
					}
					mes .@n$;
					mes "Thank you.";
					delitem 6671,.@cost; //Geffen_Magic_Coin
					getitem .@item,1;
					end;
			}
			break;
		case 4:
			mes .@n$;
			mes "You can tell a lot about a person by what gear they have.";
			mes "I will see you next time~!";
			close;

	}
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,124,173,4	script	Old Bachelor#z1_0et	1_M_03,4,4,{
	end;
OnTouch_:
	     if (strnpcinfo(0) == "Old Bachelor#z1_0et") setarray .@quotes$,"Old Bachelor: It's such a good festival, and I am alone...","Old Bachelor: Maybe I should hit on that girl...","Old Bachelor: It's so crowded in here during the Magic Tournament~!";
	else if (strnpcinfo(0) == "Little Geffen Boy#a2_0e") setarray .@quotes$,"Little Geffen Boy: Ugh ha ha~ Look~! That guy passing by there is so ugly~!!","Little Geffen Boy: I am bored! Is there anything fun to do around here?","Little Geffen Boy: I should ask my father for some pocket change.";
	else if (strnpcinfo(0) == "Dio Anemos#z1_0et") {
		if ('GMT_1QUE > 1) setarray .@quotes$,"Dio Anemos: Any time I face a woman, I really have no choice but to go easy on her...";
		else setarray .@quotes$,"Dio Anemos: I want to eat some cookies before the Magic Tournament starts.","Dio Anemos: I'm hungry... Can i have some food?","Dio Anemos: Geffen is so lively whenever I visit.";
	} else if (strnpcinfo(0) == "Ordre#z1_0et") {
		if ('GMT_1QUE > 1) setarray .@quotes$,"Ordre: Even powerful people like me can lose...";
		else setarray .@quotes$,"Ordre: I've been waiting for this air and mood for a long time.","Ordre: Show us what you have trained for.","Ordre: Let's go register for the competition.";
	} else if (strnpcinfo(0) == "Ju#z1_0et") {
		if ('GMT_1QUE > 1) setarray .@quotes$,"Ju: ... You really defeat me...";
		else setarray .@quotes$,"Ju: I will make sure to register for the Magic Tournament quickly.","Ju: I only see novices around here.","Ju: I will surprise them with my excellent battle skills!";
	} else if (strnpcinfo(0) == "Blut Hase#z1_0et") {
		if ('GMT_1QUE > 1) setarray .@quotes$,"Blut Hase: How can somebody be so powerful...";
		else setarray .@quotes$,"Blut Hase: Where do I go to register for the Magic Tournament?","Blut Hase: My clothes will be stained with the blood of my enemies.";
	} else if (strnpcinfo(0) == "Kuro Akuma#z1_0et") {
		if ('GMT_1QUE > 1) setarray .@quotes$,"Kuro Akuma: Maybe just being evil isn't enough to win the tournament...";
		else setarray .@quotes$,"Kuro Akuma: It's like a calm before a storm~!","Kuro Akuma: So peaceful~! I love it!","Kuro Akuma: There quite a few innocent lambs joining the Magic Tournament~!";
	} else if (strnpcinfo(0) == "Odoric#z1_0et") {
		if ('GMT_1QUE > 1) setarray .@quotes$,"Odoric: This is what youth looks like,sister... I'm truly jealous...";
		else setarray .@quotes$,"Odoric: I can't find my type of competitors at all!","Odoric: It is so crowded during the Tournament~!","Odoric: It should be fun dancing in the festival~!";
	} else if (strnpcinfo(0) == "Fay Kanavian#z1_0et") {
		if ('GMT_1QUE > 1) setarray .@quotes$,"Fay Kanavian: I actually lost... How is this possible?";
		else setarray .@quotes$,"Fay Kanavian: It is time to show off my Philosopher's Stone at the Tournament~!","Fay Kanavian: No one can stop me. Ha ha ha ha ha ha~!","Fay Kanavian: Have you seen my Homonculus Alphonse?";
	} else if (strnpcinfo(0) == "Licheniyes#z1_0et") {
		if ('GMT_1QUE > 1) setarray .@quotes$,"Lecheniyes: Most people won't even remember the outcome of the tournament, so there's no real sense of failure...";
		else setarray .@quotes$,"Licheniyes: Happy Geffen Magic Tournament~!","Licheniyes: It will be a very fun Magic Tournament this year.","Licheniyes: Yahoo~ Let's go join the Magic Tournament~";
	} else if (strnpcinfo(0) == "Ifodes#z1_0et") {
		if ('GMT_1QUE > 1) setarray .@quotes$,"Ifodes: Losing to a woman... Now that's a terrifying thought.";
		else setarray .@quotes$,"Ifodes: I will show who I am at the Magic Tournament!","Ifodes: Strong attack and solid defense! Sigh, I wish I had a girlfriend...","Ifodes: Is there any beautiful ladies around to show my chivalry?";
	} else if (strnpcinfo(0) == "Faymont#z1_0et") {
		if ('GMT_1QUE > 1) setarray .@quotes$,"Faymont: No time to chat, I need to go comfort the other girls who failed.";
		else setarray .@quotes$,"Faymont: I heard a new hat was released in Geffen.","Faymont: There are no other decent competitors in the Tournament?","Faymont: I've never met anyone who has a better fashion sense than me.";
	} else if (strnpcinfo(0) == "Arhi#z1_0et") {
		if ('GMT_1QUE > 1) setarray .@quotes$,"Arhi: The tournament is finally over! It was really a great year... Way too intense!";
		else setarray .@quotes$,"Arhi: I'm thinking of joining the Magic Tournament!","Arhi: This should be a pretty good experience.","Arhi: Are there any competitors that look weak?";
	} else if (strnpcinfo(0) == "Dwigh#z1_0et") {
		if ('GMT_1QUE > 1) setarray .@quotes$,"Dwigh: Needless to say, it was a pretty decisive battle!";
		else setarray .@quotes$,"Dwigh: I want this Magic Tournament to become my turning point.","Dwigh: I am quite depressed these days...","Dwigh: I will show my great skills to all of my students.";
	}
	showscript .@quotes$[rand(getarraysize(.@quotes$))],getnpcid(0);
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,91,117,6	duplicate(Old Bachelor#z1_0et)	Dio Anemos#z1_0et	4_GEFFEN_01,4,4
1@gef,85,68,6	duplicate(Old Bachelor#z1_0et)	Ordre#z1_0et	4_GEFFEN_05,4,4
1@gef,178,91,6	duplicate(Old Bachelor#z1_0et)	Ju#z1_0et	4_GEFFEN_11,4,4
1@gef,194,91,4	duplicate(Old Bachelor#z1_0et)	Little Geffen Boy#a2_0e	4_KID01,4,4
1@gef,111,62,6	duplicate(Old Bachelor#z1_0et)	Blut Hase#z1_0et	4_GEFFEN_06,4,4
1@gef,104,42,6	duplicate(Old Bachelor#z1_0et)	Kuro Akuma#z1_0et	4_GEFFEN_07,4,4
1@gef,158,63,4	duplicate(Old Bachelor#z1_0et)	Odoric#z1_0et	4_GEFFEN_10,4,4
1@gef,117,72,6	duplicate(Old Bachelor#z1_0et)	Fay Kanavian#z1_0et	4_F_GEFFEN_FAY,4,4
1@gef,137,53,4	duplicate(Old Bachelor#z1_0et)	Licheniyes#z1_0et	4_GEFFEN_09,4,4
1@gef,115,66,6	duplicate(Old Bachelor#z1_0et)	Ifodes#z1_0et	4_GEFFEN_08,4,4
1@gef,53,90,6	duplicate(Old Bachelor#z1_0et)	Faymont#z1_0et	4_GEFFEN_04,4,4
1@gef,145,125,4	duplicate(Old Bachelor#z1_0et)	Arhi#z1_0et	4_GEFFEN_02,4,4
1@gef,120,98,4	duplicate(Old Bachelor#z1_0et)	Dwigh#z1_0et	4_GEFFEN_12,4,4

1@gef_in,70,132,0	warp2	#gef_a4_0et	2,2,1@gef,46,88
1@gef_in,106,181,0	warp2	#gef_a3_0et	2,2,1@gef,178,63
1@gef,182,59,0	warp2	#gef_a1_0et	2,2,1@gef_in,106,177
1@gef_in,70,158,0	warp2	#gef_a5_0et	2,2,1@gef_in,70,146
1@gef_in,70,149,0	warp2	#gef_a6_0et	2,2,1@gef_in,70,161
1@gef,43,85,0	warp2	#gef_a2_0et	2,2,1@gef_in,70,138
1@gef,98,141,0	warp2	#gef_a8_0et	2,2,1@gef_in,28,160
1@gef_in,28,156,0	warp2	#gef_a7_0et	2,2,1@gef,101,138

1@gef,130,196,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c1	1_ETC_01
1@gef,137,190,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c2	1_F_02
1@gef,149,196,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c3	1_M_01
1@gef,136,188,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c4	4_F_TWGRANDMOM
1@gef,110,195,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c5	1_M_03
1@gef,134,63,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c6	1_M_MERCHANT
1@gef,145,47,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c7	1_M_MOC_LORD
1@gef,154,55,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c8	1_M_ORIENT01
1@gef,147,65,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c9	1_M_PASTOR
1@gef,163,76,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c10	1_F_PRIEST
1@gef,180,84,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c11	1_M_INNKEEPER
1@gef,189,97,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c12	1_M_SIZ
1@gef,194,110,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c13	1_M_PAY_ELDER
1@gef,185,107,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c14	1_M_PRON_KING
1@gef,189,120,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c15	4_F_01
1@gef,44,95,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c17	1_M_JOBTESTER
1@gef,52,83,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c18	1_M_KNIGHTMASTER
1@gef,130,196,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c19	1_ETC_01
1@gef,104,189,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c20	1_F_01
1@gef,94,194,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c21	1_F_03
1@gef,52,155,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c22	1_F_04
1@gef,55,142,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c23	1_F_GYPSY
1@gef,58,146,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c24	1_M_BARD
1@gef,45,149,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c25	1_F_LIBRARYGIRL
1@gef,44,133,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c26	1_M_HOF
1@gef,45,126,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c27	1_M_02
1@gef,44,118,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c28	1_F_MERCHANT_01
1@gef,55,113,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c29	1_F_MERCHANT_02
1@gef,50,107,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c30	1_M_JOBGUIDER
1@gef,72,65,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c31	1_M_LIBRARYMASTER
1@gef,83,60,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c32	1_F_ORIENT_01
1@gef,94,68,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c33	1_F_ORIENT_02
1@gef,97,66,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c34	1_F_ORIENT_03
1@gef,167,120,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c36	1_M_SIGN1
1@gef,152,120,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c37	2_F_MAGICMASTER
1@gef,138,110,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c38	4_F_01
1@gef,128,99,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c39	4_F_02
1@gef,105,109,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c40	4_F_03
1@gef,96,122,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c41	4_F_04
1@gef,132,137,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c42	4_F_TRAINEE
1@gef,141,132,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c43	1_M_SIGNART
1@gef,124,72,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c44	1_M_SIGNMCNT
1@gef,130,49,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#c45	1_M_SIGNMONK2
1@ge_st,95,62,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#70	4_M_LGTPOOR
1@ge_st,113,62,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#71	4_M_LGTGUARD
1@ge_st,99,62,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#72	4_F_JOB_HUNTER
1@ge_st,93,62,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#73	1_ETC_01
1@ge_st,94,62,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#74	1_F_02
1@ge_st,96,62,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#75	1_M_01
1@ge_st,98,62,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#76	1_M_02
1@ge_st,100,62,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#77	1_M_03
1@ge_st,102,62,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#78	1_F_01
1@ge_st,104,62,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#79	1_F_03
1@ge_st,116,62,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#80	1_F_04
1@ge_st,118,62,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#81	1_F_GYPSY
1@ge_st,92,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#82	4_F_TWGRANDMOM
1@ge_st,93,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#83	1_F_MERCHANT_01
1@ge_st,94,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#84	1_F_MERCHANT_02
1@ge_st,95,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#85	1_M_JOBGUIDER
1@ge_st,96,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#86	1_M_JOBTESTER
1@ge_st,97,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#87	1_M_KNIGHTMASTER
1@ge_st,98,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#88	1_M_LIBRARYMASTER
1@ge_st,99,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#89	1_F_ORIENT_01
1@ge_st,100,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#90	1_F_ORIENT_02
1@ge_st,101,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#91	1_F_ORIENT_03
1@ge_st,102,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#92	1_F_ORIENT_04
1@ge_st,103,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#93	1_M_MERCHANT
1@ge_st,104,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#94	1_M_MOC_LORD
1@ge_st,105,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#95	1_M_ORIENT01
1@ge_st,106,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#96	1_M_PASTOR
1@ge_st,107,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#97	1_F_PRIEST
1@ge_st,108,64,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#98	1_F_PUBGIRL
1@ge_st,109,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#99	4_M_DST_TOUGH
1@ge_st,110,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#100	1_M_INNKEEPER
1@ge_st,111,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#101	1_M_SIZ
1@ge_st,112,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#102	1_M_PAY_ELDER
1@ge_st,113,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#103	1_M_PRON_KING
1@ge_st,114,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#104	1_M_PUBMASTER
1@ge_st,115,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#105	1_M_SIGN1
1@ge_st,116,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#106	2_F_MAGICMASTER
1@ge_st,117,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#107	4_F_01
1@ge_st,118,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#108	4_F_02
1@ge_st,90,63,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#109	4_F_TELEPORTER
1@ge_st,91,63,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#110	4_F_THAIAYO
1@ge_st,89,38,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#111	4_M_ALCHE_E
1@ge_st,89,39,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#112	4_M_ARUNA_NFM1
1@ge_st,89,40,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#113	4_F_JPN2
1@ge_st,89,41,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#114	4_F_JPN
1@ge_st,89,42,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#115	4_F_JPNCHIBI
1@ge_st,89,43,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#116	4_F_HUGRANMA
1@ge_st,89,44,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#117	4_F_JPNOBA2
1@ge_st,89,45,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#118	4_F_JPNOBA
1@ge_st,89,51,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#119	4_F_SCIENCE
1@ge_st,89,52,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#120	4_F_SHABBY
1@ge_st,89,53,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#121	4_M_CRU_SOLD
1@ge_st,89,54,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#122	4_M_DESERT
1@ge_st,89,55,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#123	4_M_DEWBOY
1@ge_st,89,56,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#124	4_M_DEWMAN
1@ge_st,89,57,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#125	4_F_SHADOWCHASER
1@ge_st,89,58,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#126	4_F_SISTER
1@ge_st,89,59,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#127	4_F_SOCCER
1@ge_st,89,62,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#128	4_M_DOCTOR
1@ge_st,88,61,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#129	4_M_DEWZATICHIEF
1@ge_st,87,37,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#130	4_M_ALCHE_D
1@ge_st,87,59,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#131	4_F_SURA
1@ge_st,87,60,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#132	4_M_DEWOLDMAN
1@ge_st,119,62,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#133	4_F_JOB_KNIGHT
1@ge_st,119,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#134	4_F_03
1@ge_st,120,62,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#135	1_M_BARD
1@ge_st,120,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#136	4_F_04
1@ge_st,121,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#137	4_F_TRAINEE
1@ge_st,122,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#138	1_M_SIGNART
1@ge_st,123,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#139	1_M_SIGNMCNT
1@ge_st,124,62,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#140	1_F_LIBRARYGIRL
1@ge_st,124,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#141	1_M_SIGNMONK2
1@ge_st,125,62,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#142	1_M_HOF
1@ge_st,125,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#143	4_F_05
1@ge_st,126,64,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#144	4_F_06
1@ge_st,127,63,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#145	4_F_07
1@ge_st,128,63,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#146	4_F_ACROSS
1@ge_st,128,60,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#147	4_F_ALCHE
1@ge_st,128,59,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#148	4_M_EDEN_GUARDER
1@ge_st,128,58,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#149	4_F_ANNIVERSARY
1@ge_st,128,57,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#150	4_F_BRZ_INDIAN
1@ge_st,128,56,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#151	1_M_WIZARD
1@ge_st,128,55,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#152	1_M_YOUNGKNIGHT
1@ge_st,128,54,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#153	2_M_ALCHE
1@ge_st,128,53,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#154	4_F_BRZ_INDIAN
1@ge_st,128,52,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#155	4_F_BRZ_INDOLD
1@ge_st,128,51,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#156	4_F_BRZ_WOMAN
1@ge_st,128,45,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#157	2_M_BARD_ORIENT
1@ge_st,128,44,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#158	2_M_DYEINGER
1@ge_st,129,62,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#159	1_M_SIGNMONK
1@ge_st,128,43,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#160	2_M_MOLGENSTEIN
1@ge_st,129,43,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#161	4_M_CRU_OLD
1@ge_st,129,44,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#162	4_F_RUSWOMAN2
1@ge_st,129,45,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#163	4_F_RUSWOMAN3
1@ge_st,130,61,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#164	1_M_SIGNROGUE
1@ge_st,130,60,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#165	1_M_SMITH
1@ge_st,128,42,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#166	4_F_CAPEGIRL
1@ge_st,129,42,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#167	4_M_CRU_KNT
1@ge_st,128,41,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#168	4_F_CAVE1
1@ge_st,129,41,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#169	4_M_CRU_HEAD
1@ge_st,128,40,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#170	4_F_CHILD
1@ge_st,129,40,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#171	4_M_CRU_CRUA
1@ge_st,128,39,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#172	2_M_OLDBLSMITH
1@ge_st,129,39,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#173	4_F_RUSWOMAN1
1@ge_st,128,38,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#174	2_M_PHARMACIST
1@ge_st,129,38,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#175	4_F_RUSCHILD
1@ge_st,128,37,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#176	2_M_SAGE_B
1@ge_st,130,37,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#177	4_F_CHNDOCTOR
1@ge_st,130,36,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#178	4_F_CHNDRESS1
1@ge_st,130,35,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#179	2_M_SAGE_OLD
1@ge_st,108,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#180	4_F_KID3
1@ge_st,109,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#181	4_F_LGTGIRL
1@ge_st,110,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#182	4_F_LGTGRAND
1@ge_st,111,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#183	4_F_MADAME
1@ge_st,112,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#184	4_M_CHN8GUEK
1@ge_st,113,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#185	4_M_CHNCOOK
1@ge_st,114,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#186	4_M_CHNGENERL
1@ge_st,115,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#187	4_M_CHNMAN
1@ge_st,116,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#188	4_F_MASK
1@ge_st,117,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#189	4_F_MONK
1@ge_st,118,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#190	4_F_NFLOSTGIRL
1@ge_st,119,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#191	4_F_NOVICE
1@ge_st,129,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#192	2_M_SWORDMASTER
1@ge_st,120,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#193	4_M_CHNMONK
1@ge_st,121,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#194	4_M_CHNOLD
1@ge_st,122,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#195	4_M_CHNSOLDIER
1@ge_st,123,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#196	4_M_CRU
1@ge_st,124,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#197	4_F_RACHOLD
1@ge_st,125,34,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#198	4_F_ROGUE
1@ge_st,128,33,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#199	4_F_CHNDRESS2
1@ge_st,127,33,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#200	4_F_CHNDRESS3
1@ge_st,119,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#201	4_F_DST_CHILD
1@ge_st,118,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#202	4_LGTSCIENCE
1@ge_st,117,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#203	4_M_01
1@ge_st,116,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#204	4_F_DST_GRAND
1@ge_st,115,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#205	4_F_EDEN_MASTER
1@ge_st,114,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#206	4_F_EDEN_OFFICER
1@ge_st,113,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#207	4_M_1STPRIN1
1@ge_st,112,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#208	4_M_DST_CHILD
1@ge_st,111,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#209	4_F_EINOLD
1@ge_st,110,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#210	4_F_YUNYANG
1@ge_st,109,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#211	4_M_2NDPRIN1
1@ge_st,108,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#212	4_M_03
1@ge_st,126,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#213	2_M_THIEFMASTER
1@ge_st,125,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#214	4_COOK
1@ge_st,124,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#215	4_F_CHNWOMAN
1@ge_st,123,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#216	4_F_CRU
1@ge_st,122,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#217	4_DST_SOLDIER
1@ge_st,121,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#218	4_KID01
1@ge_st,120,32,2	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#219	4_F_DESERT
1@ge_st,107,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#220	4_F_GODEMOM
1@ge_st,107,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#221	4_F_KID2
1@ge_st,106,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#222	4_F_GON
1@ge_st,106,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#223	4_F_THAIGIRL
1@ge_st,105,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#224	4_M_3RDPRIN1
1@ge_st,105,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#225	4_M_CAVE1
1@ge_st,104,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#226	4_M_DST_MASTER
1@ge_st,104,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#227	4_M_CASMAN1
1@ge_st,103,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#228	4_M_4THPRIN1
1@ge_st,103,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#229	4_M_BUDDHIST
1@ge_st,102,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#230	4_M_DSTMAN
1@ge_st,102,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#231	4_M_BRZ_MAN1
1@ge_st,101,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#232	4_F_GUILLOTINE
1@ge_st,101,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#233	4_F_TWMASKGIRL
1@ge_st,100,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#234	4_F_HUGIRL
1@ge_st,100,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#235	4_F_KHGIRL
1@ge_st,99,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#236	4_F_HUGRANMA
1@ge_st,99,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#237	4_F_KHELLY
1@ge_st,98,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#238	4_F_HUWOMAN
1@ge_st,98,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#239	4_F_KHELLISIA
1@ge_st,97,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#240	4_M_5THPRIN1
1@ge_st,97,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#241	4_M_BRZ_JACI
1@ge_st,96,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#242	4_M_06
1@ge_st,96,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#243	4_M_BIBI
1@ge_st,95,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#244	4_M_6THPRIN1
1@ge_st,95,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#245	4_M_BARD
1@ge_st,94,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#246	4_M_ACROSS
1@ge_st,94,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#247	4_M_BARBER
1@ge_st,93,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#248	4_M_ALCHE_A
1@ge_st,93,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#249	4_M_ATEIL
1@ge_st,92,32,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#250	4_F_JOB_ASSASSIN
1@ge_st,91,33,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#251	4_F_JOB_BLACKSMITH
1@ge_st,90,33,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#252	4_M_JP_RUN
1@ge_st,89,34,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#253	4_M_EINMAN
1@ge_st,88,35,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#254	4_M_ALCHE_B
1@ge_st,88,36,0	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#255	4_M_ALCHE_C
1@gef,124,72,4	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#256	1_M_SIGNMCNT
1@gef,106,56,6	duplicate(Old Bachelor#z1_0et)	Tournament Spectator#257	1_F_ORIENT_04
1@ge_st,107,62,6	duplicate(Old Bachelor#z1_0et)	Veins Spectator#a1	4_F_ALCHE_A
1@ge_st,110,62,4	duplicate(Old Bachelor#z1_0et)	Comodo Spectator#a1	4_F_EINWOMAN
1@ge_st,115,62,4	duplicate(Old Bachelor#z1_0et)	Prontera Spectator#a1	4_M_DST_GRAND
1@ge_st,117,62,4	duplicate(Old Bachelor#z1_0et)	Payon Spectator#a1	1_F_SIGNZISK
1@ge_st,121,62,4	duplicate(Old Bachelor#z1_0et)	Alberta Spectator#a1	4_M_05
1@ge_st,97,62,6	duplicate(Old Bachelor#z1_0et)	Prontera Spectator#a2	4_M_2NDPRIN1
1@ge_st,101,62,6	duplicate(Old Bachelor#z1_0et)	Payon Spectator#a2	4_M_ROGUE
1@ge_st,105,62,6	duplicate(Old Bachelor#z1_0et)	Alberta Spectator#a2	4_M_ORIENT02
1@ge_st,103,62,6	duplicate(Old Bachelor#z1_0et)	Magic Academy Student#1	4_M_02
1@ge_st,109,62,4	duplicate(Old Bachelor#z1_0et)	Magic Academy Student#2	4_M_CHILD1
1@ge_st,114,62,4	duplicate(Old Bachelor#z1_0et)	Magic Academy Student#3	4_M_04
1@ge_st,122,62,4	duplicate(Old Bachelor#z1_0et)	Magic Academy Student#4	1_F_MARIA
1@ge_st,123,62,4	duplicate(Old Bachelor#z1_0et)	Magic Academy Student#5	1_M_SIGNALCHE
1@gef,128,93,4	duplicate(Old Bachelor#z1_0et)	Geffen Villager#c1	4_F_CAVE1
1@gef,103,100,6	duplicate(Old Bachelor#z1_0et)	Geffen Villager#c2	1_M_JOBGUIDER

1@gef_in,110,172,0	script	Christopher#1_0et	1_M_SMITH,{
	mes "[Christopher]";
	mes "Welcome to Christopher's Workshop.";
	mes "Ye can get all yer stuff for forging here. What business brings ye to me?";
	next;
	mes "[Christopher]";
	mes "We are taking a break from our forges in honor of the festival.";
	mes "Please come back again after the festival is done.";
	close;

OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,129,65,4	script	Point Merchant#gef_m	8_F_GIRL,{
	if (!checkweight(1201,1) || MaxWeight - Weight < 2000) {
		mes "- Wait a minute !! -";
		mes "- Currently you're carrying -";
		mes "- too many items with you. -";
		mes "- Please try again -";
		mes "- after you lose some weight. -";
		close;
	}
	mes "[Point Merchant]";
	mes "Hello. I'm selling a catalyst called ^FF0000Points^000000 for Sorcerers. What would you like?";
	next;
	.@i = select("Scarlet Points - 200z:Lime Green Points - 200z:Indigo Points - 200z:Yellow Wish Points - 200z:Cancel") - 1;
	mes "[Point Merchant]";
	if (.@i == 4) {
		mes "You can't find the stuff you need?";
		close;
	}
	setarray .@itemid[0],6360,6363,6361,6362; //Scarlet_Pts,Lime_Green_Pts,Indigo_Pts,Yellow_Wish_Pts
	setarray .@color$[0],"Scarlet","Lime Green","Indigo","Yellow Wish";
	mes "You have chosen "+.@color$[.@i]+" Points.";
	mes "How many do you want?";
	mes "If you want to cancel, enter 0.";
	next;
	input .@amount;
	mes "[Point Merchant]";
	if (!.@amount) {
		mes "You've cancelled the trade.";
		close;
	}
	if (Zeny < .@amount * 200) {
		mes "You don't seem to have enough money.";
		close;
	}
	if (!checkweight(.@itemid[.@i],.@amount)) {
		mes "You don't have enough space in your inventory to buy this amount.";
		close;
	}
	mes "Thank you very much. See you~!";
	Zeny = Zeny - (.@amount * 200);
	getitem .@itemid[.@i],.@amount;
	close;

OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,127,65,3	script	Universal Rental NPC#gf	8W_SOLDIER,{
	if (ismounting()) {
		showscript "You must first remove your mount.";
		end;
	} else if ((eaclass()&EAJ_THIRDMASK == EAJ_RANGER) && !countitem(6124)) {
		if (!checkfalcon() && getskilllv("HT_FALCON") && !checkwug()) {
			if (select(" ~ Falcon: ~ Warg") == 1) setfalcon;
			else getitem 6124,1; //Wolf's_Flute
		} else getitem 6124,1; //Wolf's_Flute
	} else if ((eaclass()&EAJ_THIRDMASK == EAJ_MECHANIC) && !checkcart() && getskilllv("MC_PUSHCART")) {
		if (!checkmadogear() && getskilllv("NC_MADOLICENCE")) {
			if (select(" ~ Cart: ~ Mado") == 1) setcart;
			else setmadogear;
		} else setcart;
	} else if (!checkcart() && getskilllv("MC_PUSHCART")) setcart;
	else if (!checkfalcon() && getskilllv("HT_FALCON") && !checkwug()) setfalcon;
	else if (!checkriding() && !checkdragon() && getskilllv("KN_RIDING")) {
		if (eaclass()&EAJ_THIRDMASK == EAJ_RUNE_KNIGHT) setdragon;
		else setriding;
	} else if (!checkmadogear() && getskilllv("NC_MADOLICENCE")) setmadogear;
	else {
		showscript "You do not meet requirements to rent.";
		end;
	}
	specialeffect2 EF_TEIHIT3;
	end;

OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,124,65,4	script	Kafra Employee#gef_t	4_F_KAFRA4,{
	cutin "kafra_04",2;
	mes "[Kafra Employee]";
	mes "Welcome~!";
	mes "The Kafra Services.";
	mes "are always on your side.";
	mes "So how can I help you?";
	callfunc "F_Kafra",5,5,1,50,0;

OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,120,34,0	script	#gefmagic_warp01	WARPNPC,2,2,{
	callfunc("InventoryCheck");
	end;
OnTouch_:
	donpcevent instance_npcname("Old Bachelor#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("Dio Anemos#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("Ju#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("Ordre#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("Blut Hase#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("Kuro Akuma#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("Odoric#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("Fay Kanavian#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("Licheniyes#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("Ifodes#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("Faymont#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("Arhi#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("Dwigh#z1_0et")+"::OnDisable";
	donpcevent instance_npcname("#gefmagic_warp01")+"::OnDisable";
	warp instance_mapname("1@ge_st"),104,50;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,120,213,0	script	#gefmagic_warp02	WARPNPC,2,2,{
	end;
OnTouch_:
	warp "dali",92,142;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,120,61,0	script	#invisGMTquests	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch_:
	for (.@i = 9309; .@i < 9315; .@i++)
		setquest .@i;
	'gmt_event = 1;
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,123,203,4	script	Tournament Guide#gfmg	4_M_GEF_SOLDIER,{
	.@n$ = "[Tournament Guide]";
	cutin "gef_soldier",2;
	mes .@n$;
	mes "Welcome to the Magical city of ^8B4513Geffen^000000.";
	next;
	mes .@n$;
	mes "If you want to watch the ^55CC55Magic Tournament^000000 go to the southern fountain of Geffen.";
	next;
	mes .@n$;
	mes "The fireworks are here to celebrate the Geffen Magical Tournament Festival.";
	next;
	mes .@n$;
	mes "Please enjoy the festivities and enjoy your stay here in Geffen~!";
	close2;
	cutin "",255;
	end;

OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,203,116,4	duplicate(Tournament Guide#gfmg)	Tournament Guide#gf2	4_M_GEF_SOLDIER
1@gef,36,123,6	duplicate(Tournament Guide#gfmg)	Tournament Guide#gf3	4_M_GEF_SOLDIER

1@gef,122,58,4	script	Receptionist#1_0et	4_M_ARUNA_NFM1,{
	.@n$ = "[Tournament Receptionist]";
	if (checkquest(9309) != -1) {
		mes .@n$;
		mes "Fenrir won this year's Magic Tournament!";
		next;
		mes .@n$;
		mes "I'm such a big fan of hers.";
		close;
	}
	if (checkquest(9308) != -1) {
		mes .@n$;
		mes "Congratulations on being this year's Magic Tournament winner!";
		close;
	}
	if ('passtest == 2) {
		mes .@n$;
		mes "Do you wish to try again?";
		mes "If you can kill the Desert Wolf within 60 seconds, you pass the test.";
		next;
		mes .@n$;
		mes "If you fail, you will automatically be eliminated from the list. You can try again as many times as you want.";
		mes "Will you take the test again?";
		next;
		switch (select("No:Yes")) {
			case 1:
				mes .@n$;
				mes "Come back if you change your mind.";
				close;
			case 2:
				mes .@n$;
				mes "There is no registration fee to enter.";
				mes "The only requirement is to pass a simple test.";
				next;
				mes .@n$;
				mes "The test is very simple. Defeat a Desert Wolf in 60 seconds or less and you're in.";
				next;
				mes .@n$;
				mes "If you fail you will automatically be eliminated from the list but you can try again as many times as you wish.";
				mes "Are you ready?";
				next;
				switch (select("No:Yes")) {
					case 1:
						mes .@n$;
						mes "Come back if you change your mind.";
						close;
					case 2:
						mes .@n$;
						mes "You can participate in the Magic Tournament after passing the test.";
						mes "Then, let us begin!";
						npctalk "Receptionist: Time limit is 60 seconds ! Ready! Set! Go!";
						changequest 9292,9293;
						addtimer 60000,instance_npcname("Receptionist#1_0et")+"::OnFail";
						monster instance_mapname("1@gef"),120,62,"--en--",1106,1,instance_npcname("Receptionist#1_0et")+"::OnTest";
						donpcevent instance_npcname("Receptionist#1_0et")+"::OnDisable";
						close;
				}
		}
	} else if ('passtest == 1) {
		if ('gmt_register) {
			mes .@n$;
			mes "The Magic Tournament is going to start soon.";
			mes "Enter the portal to the south and you can join in.";
			next;
			mes .@n$;
			mes "Good luck!";
			close;
		}
		mes .@n$;
		mes "Congratulations! You passed the test!";
		next;
		mes .@n$;
		mes "Give me your name so I can write it down.";
		mes "You will automatically be registered for the tournament now.";
		next;
		input .@char$;
		if (.@char$ == "")
			close;
		mes .@n$;
		mes 'charname$+"?";
		mes "Okay, interesting name.";
		mes "Anyway, your registration is complete!";
		'gmt_register = 1;
		erasequest 9293;
		if (checkquest(9294) > -1)
			erasequest 9294;
		setquest 9294;
		donpcevent instance_npcname("#gefmagic_warp01")+"::OnEnable";
		next;
		mes .@n$;
		mes "Competitors who registered will randomly be selected.";
		next;
		mes .@n$;
		mes "The Magic Tournament is going to start soon.";
		mes "Enter the portal to the south and you can join in.";
		next;
		mes .@n$;
		mes "Good Luck~!";
		close;
	}
	if (checkquest(9293) == -1) {
		mes .@n$;
		mes "Thank you for visiting the Geffen Magic Tournament.";
		mes "What can I do for you?";
		next;
L_Menu:
		switch (select("About Geffen Magic Tournament:How do I Register?:Collecting Rewards.:Can I get a Spectator Pass?:End Conversation")) {
			case 1:
				mes .@n$;
				mes "Geffen Magic Tournament is being held once every 3 years.";
				next;
				mes .@n$;
				mes "This festival used to be a more studious event with scholars discussing magical methods.";
				mes "Now it's all about fun and a big party.";
				next;
				mes .@n$;
				mes "Now it has become almost exclusively a fighting tournament.";
				mes "The most famous Mages from all over the world come for the tournament.";
				next;
				mes .@n$;
				mes "Anything else?";
				next;
				goto L_Menu;
				break;
			case 2:
				mes .@n$;
				mes "There is no registration fee to enter.";
				mes "The only requirement is to pass a simple test.";
				next;
				mes .@n$;
				mes "The test is very simple. Defeat a Desert Wolf in 60 seconds or less and you're in.";
				next;
				mes .@n$;
				mes "If you fail you will automatically be eliminated from the list but you can try again as many times as you wish.";
				mes "Do you want to take the test?";
				next;
				switch (select("No:Yes")) {
					case 1:
						mes .@n$;
						mes "Come back if you change your mind.";
						close;
					case 2:
						mes .@n$;
						mes "You can participate in the Magic Tournament after passing the test.";
						mes "Then, let us begin!";
						npctalk "Receptionist: Time limit is 60 seconds ! Ready! Set! Go!";
						changequest 9292,9293;
						addtimer 60000,instance_npcname("Receptionist#1_0et")+"::OnFail";
						monster instance_mapname("1@gef"),120,62,"--en--",1106,1,instance_npcname("Receptionist#1_0et")+"::OnTest";
						donpcevent instance_npcname("Receptionist#1_0et")+"::OnDisable";
						close;
				}
			case 3:
				mes .@n$;
				mes "The further you go along in the tournament, the more coins you will earn.";
				next;
				mes .@n$;
				mes "Collect the coins and you can exchange them for equipment from the Geffen Coin Operator.";
				next;
				mes .@n$;
				mes "Anything else?";
				next;
				goto L_Menu;
				break;
			case 4:
				mes .@n$;
				mes "Hmm it seems that the Magic Tournament is so popular this year that there aren't any more spectator seats available.";
				next;
				mes .@n$;
				mes "I am sorry for inconvenience.";
				next;
				mes .@n$;
				mes "Do you need anything else?";
				next;
				goto L_Menu;
				break;
			case 5:
				mes .@n$;
				mes "Please enjoy the Geffen Magic Tournament.";
				close;
		}
	}

OnTest:
	deltimer instance_npcname("Receptionist#1_0et")+"::OnFail";
	'passtest = 1;
	donpcevent instance_npcname("Receptionist#1_0et")+"::OnEnable";
	npctalk "Receptionist: You passed the test! Shall we finish your registration?",instance_npcname("Receptionist#1_0et");
	end;
OnFail:
	killmonster instance_mapname("1@gef"),instance_npcname("Receptionist#1_0et")+"::OnTest";
	'passtest = 2;
	donpcevent instance_npcname("Receptionist#1_0et")+"::OnEnable";
	npctalk "Receptionist: You failed the test. Talk to me if you wish to try again.",instance_npcname("Receptionist#1_0et");
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,102,49,0	script	#GeffenAcademyMasterS	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch_:
	if ('GMT_1QUE < 11) {
		.@n$ = "[Geffen Academy Master]";
		donpcevent instance_npcname("#GeffenAcademyMasterS")+"::OnDisable";
		cutin "acamaster_a",2;
		mes .@n$;
		mes "Ladies and gentlemen!";
		mes "Welcome to the Geffen Magic Tournament!";
		next;
		mes .@n$;
		mes "Today a champion will be crowned.";
		next;
		mes .@n$;
		mes "There are 2 divisions this year divided into Group A and B.";
		mes "The winner of each group will face each other for the championship match.";
		next;
		mes .@n$;
		mes "I am the MC of Group A.";
		mes "Geffen Academy Master~! Archmage Zanzibar Hellmod";
		next;
		mes .@n$;
		mes "I am honored to be this year's MC.";
		mes "Now, it's time for the matches to begin.";
		next;
		mes .@n$;
		mes "Ahem...";
		close2;
		cutin "",255;
		'GMT_1QUE = 11;
		changequest 9294,9295;
		donpcevent instance_npcname("Geffen Academy Master")+"::OnStart";
	}
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,107,57,4	script	Tournament Guide#gefMT	4_M_HUMAN_02,{
	.@n$ = "[Tournament Guide]";
	if (checkquest(9308) != -1) {
		switch (select("Leave the Arena and receive your reward:End Conversation")) {
			case 1:
				mes .@n$;
				mes "You won the competition!";
				mes "Congratulations!";
				next;
				mes .@n$;
				mes "By the way, the Academy Master has something to tell you!";
				next;
				.@n2$ = "[Geffen Academy Master]";
				cutin "acamaster_a",2;
				mes .@n2$;
				mes "Congratulations!";
				mes "This has been the best pool of competitors in the history of this competition.";
				next;
				mes .@n2$;
				mes "I present to you your earned ^55CC55Geffen Magic Tournament Coins.^000000";
				next;
				mes .@n2$;
				mes "Bring the coins to the ^55CC55Geffen Coin Operator^000000 to exchange for special equipment.";
				next;
				mes .@n2$;
				mes "Your name will be remembered in the history books of Geffen.";
				next;
				mes .@n2$;
				mes "Congratulations again.";
				mes "I hope you enjoy the rest of the Geffen Festivities.";
				close2;
				cutin "",255;
				'gmt_event = 1;
				getitem 6671,20; //Geffen_Magic_Coin
				warp instance_mapname("1@gef"),120,35;
				end;
			case 2:
				end;
		}
	}
	mes .@n$;
	if ('GMT_1QUE < 22) {
		mes "Congratulations on winning the "+callfunc("F_GetNumSuffix",('GMT_1QUE - 10))+" round!";
		.@menu$ = "Begin the "+callfunc("F_GetNumSuffix",('GMT_1QUE - 9))+" match.";
	} else {
		mes "Congratulations! You've defeated every other opponent in Group A! Good luck on the final!";
		.@menu$ = "Begin the final match.";
	}
	next;
	switch (select(.@menu$,"End Conversation")) {
		case 1:
			mes .@n$;
			mes "Winners of each round will receive ^55CC55Geffen Magic Tournament Coins^000000 as a reward.";
			getitem 6671,'reward['GMT_1QUE - 11]; //Geffen_Magic_Coin
			next;
			mes .@n$;
			mes "Bring the coins to the ^55CC55Geffen Coin Operator^000000 to exchange them for special equipment.";
			next;
			mes .@n$;
			mes "The "+callfunc("F_GetNumSuffix",('GMT_1QUE - 9))+" match of Group A is about to begin!";
			close2;
			donpcevent instance_npcname("Tournament Healer#1")+"::OnDisable";
			switch ('GMT_1QUE) {
				case 11:
					donpcevent instance_npcname("Dio Anemos#1")+"::OnEnable";
					break;
				case 12:
					     if ('GMTQuest == 1) donpcevent instance_npcname("Geffen Gangster#n1")+"::OnEnable";
					else if ('GMTQuest == 2) donpcevent instance_npcname("Geffen Bully#n1")+"::OnEnable";
					else donpcevent instance_npcname("Geffen Shoplifter#n1")+"::OnEnable";
					break;
				case 13:
					donpcevent instance_npcname("Faymont#1")+"::OnEnable";
					break;
				case 14:
					donpcevent instance_npcname("Ordre#1")+"::OnEnable";
					break;
				case 15:
					donpcevent instance_npcname("Blut Hase#1")+"::OnEnable";
					break;
				case 16:
					donpcevent instance_npcname("Kuro Akuma#1")+"::OnEnable";
					break;
				case 17:
					donpcevent instance_npcname("Ifodes#1")+"::OnEnable";
					break;
				case 18:
					donpcevent instance_npcname("Licheniyes#1")+"::OnEnable";
					break;
				case 19:
					donpcevent instance_npcname("Odoric#1")+"::OnEnable";
					break;
				case 20:
					donpcevent instance_npcname("Ju#1")+"::OnEnable";
					break;
				case 21:
					'half = rand(0,1);
					if ('half)
						donpcevent instance_npcname("Dwigh#1")+"::OnEnable";
					else
						donpcevent instance_npcname("Fay Kanavian#1")+"::OnEnable";
					break;
				case 22:
					donpcevent instance_npcname("Fenrir#f")+"::OnEnable";
					break;
			}
			warp instance_mapname("1@ge_st"),104,50;
			'GMT_1QUE++;
			donpcevent instance_npcname("Tournament Guide#gefMT")+"::OnDisable";
			donpcevent instance_npcname("Geffen Academy Master")+"::OnStart";
			end;
		case 2:
			mes .@n$;
			mes "Need more time to prepare I see.";
			mes "Not a problem, talk to me when you're ready.";
			close;
	}

OnInstanceInit:
	setarray 'reward,1,2,3,4,5,6,7,8,9,10,15,20,20;
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,109,57,4	script	Geffen Academy Master	ACADEMY_MASTER,{
	end;
OnStart:
	attachrid('gmt_account_id);
	if ('GMT_1QUE != 11)
		changequest 9283+'GMT_1QUE,9284+'GMT_1QUE;
	sleep2 100;
	switch ('GMT_1QUE) {
		case 11:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			npctalk "Geffen Academy Master: Ladies and Gentlemen!";
			sleep2 3000;
			npctalk "Geffen Academy Master: I do my best to be as loud as I can!";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			donpcevent instance_npcname("Arhi#1")+"::OnEnable";
			sleep2 3000;
			npctalk "Geffen Academy Master: The Geffen Magic Tournament will now commence!";
			sleep2 1000;
			npctalk "Tournament Spectator: Wow~!!! Looks fun~~!! Yahoo~!",instance_npcname("Tournament Spectator#"+rand(70,257));
			sleep2 1000;
			npctalk "Tournament Spectator: This is getting exciting~!",instance_npcname("Tournament Spectator#"+rand(70,257));
			sleep2 1000;
			npctalk "Tournament Spectator: When is the game going to start~!",instance_npcname("Tournament Spectator#"+rand(70,257));
			sleep2 500;
			donpcevent instance_npcname("Arhi#1")+"::OnActivate";
			sleep2 500;
			npctalk "Geffen Academy Master: We are starting the 1st match for Group A";
			sleep2 2000;
			npctalk "Geffen Academy Master: On this corner, "+('sex ? "he" : "she")+" looks weak enough to lose in the 1st match!";
			sleep2 3000;
			npctalk "Geffen Academy Master: Give a big welcome to the unknown competitor! "+'charname$+"~!";
			sleep2 2000;
			npctalk "Geffen Academy Master: And on the other corner, Arhi the Novice! Give it your best shot!";
			sleep2 12500;
			break;
		case 12:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			npctalk "Geffen Academy Master: The 2nd match of Group A is about to begin!";
			sleep2 3000;
			npctalk "Geffen Academy Master: On this corner, the competitor who exceeded our expectations by getting past the first round!";
			sleep2 3000;
			npctalk "Geffen Academy Master: The extremely weak looking competitor, "+'charname$+"!";
			sleep2 3000;
			donpcevent instance_npcname("Dio Anemos#1")+"::OnActivate";
			sleep2 500;
			npctalk "Geffen Academy Master: And "+('sex ? "his" : "her")+" opponent...";
			sleep2 3000;
			npctalk "Geffen Academy Master: Despite his skipping classes at the Magic Academy...";
			sleep2 3000;
			npctalk "Geffen Academy Master: A crowd favorite! A big round of applause to the Magician Apprentice, Dio Anemos!";
			sleep2 13500;
			break;
		case 13:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			npctalk "Geffen Academy Master: The 3rd match of Group A is about to begin!";
			sleep2 2000;
			npctalk "Geffen Academy Master: Welcome back our unlikely competitor, "+'charname$+"!";
			sleep2 3000;
			npctalk "Geffen Academy Master: And "+('sex ? "his" : "her")+" opponent...";
			sleep2 2000;
			if ('GMTQuest == 1) {
				donpcevent instance_npcname("Geffen Gangster#n1")+"::OnActivate";
				sleep2 500;
				npctalk "Geffen Academy Master: Whose looks give off a creepy air about him...";
				sleep2 3000;
				npctalk "Geffen Academy Master: A member of the Curvy Woman Loving club~!! Geffen Gangster!";
			} else if ('GMTQuest == 2) {
				donpcevent instance_npcname("Geffen Bully#n1")+"::OnActivate";
				sleep2 500;
				npctalk "Geffen Academy Master: With a face only a mother can love!";
				sleep2 3000;
				npctalk "Geffen Academy Master: The ruthless Geffen Bully!";
			} else {
				donpcevent instance_npcname("Geffen Shoplifter#n1")+"::OnActivate";
				sleep2 500;
				npctalk "Geffen Academy Master: With a mischievous grin on her face!";
				sleep2 3000;
				npctalk "Geffen Academy Master: The Geffen Thief Guild's Guildmaster! Geffen Shoplifter!";
			}
			sleep2 16500;
			break;
		case 14:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			npctalk "Geffen Academy Master: The surprise of this year's Tournament~!";
			sleep2 3000;
			npctalk "Geffen Academy Master: The unrivaled warrior! "+'charname$+"!";
			sleep2 3000;
			donpcevent instance_npcname("Faymont#1")+"::OnActivate";
			npctalk "Geffen Academy Master: And "+('sex ? "his" : "her")+" opponent~!!!";
			sleep2 3000;
			npctalk "Geffen Academy Master: Entering the ring with pomp and circumstance.";
			sleep2 3000;
			npctalk "Geffen Academy Master: Prontera's pride and style,Faymont!";
			npctalk "Prontera Spectator: Oh~ A player from Prontera ah!",instance_npcname("Prontera Spectator#a1");
			sleep2 2000;
			npctalk "Prontera Spectator: Do not give Prontera a bad name!!",instance_npcname("Prontera Spectator#a2");
			sleep2 12000;
			break;
		case 15:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			npctalk "Geffen Academy Master: This isn't just a fluke ladies and gents!";
			sleep2 3000;
			npctalk "Geffen Academy Master: The remarkable rookie! "+'charname$+"!";
			sleep2 3000;
			npctalk "Geffen Academy Master: And "+('sex ? "his" : "her")+" opponent~!!!";
			sleep2 500;
			donpcevent instance_npcname("Ordre#1")+"::OnActivate";
			sleep2 3000;
			npctalk "Geffen Academy Master: One who promises to fight with honor!";
			sleep2 3000;
			npctalk "Geffen Academy Master: The self-proclaimed master of battle, Ordre!";
			sleep2 16000;
			break;
		case 16:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			npctalk "Geffen Academy Master: Suddenly, the incredibly powerful!";
			sleep2 3000;
			npctalk "Geffen Academy Master: Super rookie of this year's tournament~! "+'charname$+"!";
			sleep2 3000;
			npctalk "Geffen Academy Master: And "+('sex ? "his" : "her")+" opponent~!!!";
			sleep2 500;
			donpcevent instance_npcname("Blut Hase#1")+"::OnActivate";
			sleep2 3000;
			npctalk "Geffen Academy Master: Cute on the outside, but cruely destroys enemies!";
			sleep2 3000;
			npctalk "Geffen Academy Master: Bloody Rabbit Ears~!! Blut Hase!";
			sleep2 14000;
			break;
		case 17:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			npctalk "Geffen Academy Master: Onwards to the 7th Round!";
			sleep2 3000;
			npctalk "Geffen Academy Master: Welcome back "+'charname$+"!";
			sleep2 3000;
			npctalk "Geffen Academy Master: And "+('sex ? "his" : "her")+" opponent~!!!";
			sleep2 2000;
			donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
			npctalk "Geffen Academy Master: A competitor more evil than any we've seen before!";
			sleep2 500;
			donpcevent instance_npcname("Kuro Akuma#1")+"::OnActivate";
			sleep2 3000;
			npctalk "Geffen Academy Master: The Devil's Tooth, Kuro Akuma!";
			donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
			sleep2 17000;
			break;
		case 18:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			npctalk "Geffen Academy Master: Starting up Round 8 for Group A!";
			sleep2 3000;
			npctalk "Geffen Academy Master: The darling of this year's tournament!";
			sleep2 3000;
			npctalk "Geffen Academy Master: Rune-Midgard newest star, "+'charname$+"!";
			sleep2 2000;
			npctalk "Geffen Academy Master: And "+('sex ? "his" : "her")+" opponent~!!!";
			sleep2 2000;
			npctalk "Payon Spectator: They look very strong!",instance_npcname("Payon Spectator#a1");
			sleep2 250;
			donpcevent instance_npcname("Ifodes#1")+"::OnActivate";
			sleep2 250;
			npctalk "Veins Spectator: Looks good and strong ah!",instance_npcname("Veins Spectator#a1");
			sleep2 1000;
			npctalk "Geffen Academy Master: Slow as a turtle, fast as a hare!";
			sleep2 3000;
			npctalk "Geffen Academy Master: The maniac of Rune Midgard! Ifodes!";
			donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
			sleep2 15750;
			break;
		case 19:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			npctalk "Geffen Academy Master: We have now entered the 9th Round of this competition!";
			sleep2 3000;
			npctalk "Geffen Academy Master: Nobody can stop "+('sex ? "him" : "her")+"!";
			sleep2 3000;
			npctalk "Geffen Academy Master: "+('sex ? "His" : "Her")+" strength has been recognized by the people! "+'charname$;
			sleep2 2000;
			npctalk "Geffen Academy Master: And "+('sex ? "his" : "her")+" opponent~!!!";
			sleep2 500;
			donpcevent instance_npcname("Licheniyes#1")+"::OnActivate";
			sleep2 500;
			donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
			sleep2 1000;
			npctalk "Geffen Academy Master: She might look like a nice lady, but you better watch out!";
			sleep2 3000;
			npctalk "Geffen Academy Master: She'll attack you with the swiftness of a snake!";
			sleep2 3000;
			npctalk "Geffen Academy Master: The Lady of Death! Licheniyes!";
			donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
			sleep2 12500;
			break;
		case 20:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			npctalk "Geffen Academy Master: Let us begin the 10th Round of Group A!";
			sleep2 3000;
			npctalk "Geffen Academy Master: In this corner, back to entertain us again!";
			sleep2 3000;
			npctalk "Geffen Academy Master: None other than the incredible "+'charname$+"!";
			sleep2 1000;
			donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
			sleep2 1000;
			npctalk "Geffen Academy Master: And "+('sex ? "his" : "her")+" opponent~!!!";
			sleep2 1000;
			npctalk "Geffen Academy Master: Seductress of Rune Midgard...";
			sleep2 500;
			donpcevent instance_npcname("Odoric#1")+"::OnActivate";
			sleep2 500;
			npctalk "Geffen Academy Master: You can't look away from her curves!";
			sleep2 3000;
			npctalk "Geffen Academy Master: The Songstress of Death! Odoric!";
			donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
			sleep2 16500;
			break;
		case 21:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			npctalk "Geffen Academy Master: We're getting closer to the end, next up is Quarter-Finals!";
			sleep2 3000;
			npctalk "Geffen Academy Master: The winning never ends with "+'charname$+"!";
			sleep2 2000;
			donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
			sleep2 1000;
			npctalk "Geffen Academy Master: And "+('sex ? "his" : "her")+" opponent~!!!";
			sleep2 500;
			donpcevent instance_npcname("Ju#1")+"::OnActivate";
			sleep2 250;
			npctalk "Loki: I can smell blood...",instance_npcname("Loki#a2");
			sleep2 1000;
			npctalk "Iris: Oh... A fierce competitor, is not it?",instance_npcname("Iris#a2");
			sleep2 500;
			npctalk "Geffen Academy Master: Hidden behind a shroud of mystery...";
			sleep2 3000;
			npctalk "Geffen Academy Master: Master of power and speed! Ju!";
			donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
			sleep2 15250;
			break;
		case 22:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			npctalk "Geffen Academy Master: We are now at the Semi-Finals of this competition, this match will decide the winner for Group A!";
			sleep2 3000;
			npctalk "Geffen Academy Master: Winning against all odds, Group A's Dark Horse, "+'charname$+"!";
			sleep2 3000;
			npctalk "Geffen Academy Master: And "+('sex ? "his" : "her")+" opponent~!!!";
			if ('half) {
				sleep2 500;
				donpcevent instance_npcname("Dwigh#1")+"::OnActivate";
				sleep2 1500;
				npctalk "Geffen Academy Master: Chief Professor of the Mage Academy, loved by her many disciples!";
				sleep2 1000;
				donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
				sleep2 2000;
				npctalk "Geffen Academy Master: Commander of battle and wits! Dwigh!";
				sleep2 21500;
			} else {
				sleep2 2000;
				npctalk "Geffen Academy Master: An Alchemist from Aldebaran, the city of science!";
				sleep2 500;
				donpcevent instance_npcname("Fay Kanavian#1")+"::OnActivate";
				sleep2 500;
				donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
				sleep2 2000;
				npctalk "Geffen Academy Master: Fay Kanavian and her homunculus, Alphonse!";
			}
			break;
		case 23:
			donpcevent instance_npcname("#Talkcontrol")+"::OnStart";
			donpcevent instance_npcname("#FireworksControl")+"::OnStart";
			npctalk "Geffen Academy Master: A previously anonymous fighter";
			sleep2 3000;
			npctalk "Geffen Academy Master: Despite this, unmatched in Group A!";
			sleep2 2000;
			npctalk "Geffen Academy Master: The most talked about competitor this year!";
			sleep2 3000;
			npctalk "Geffen Academy Master: The unrivaled! "+'charname$+"!";
			sleep2 3000;
			npctalk "Loki: Aha, this match looks like it will be interesting.",instance_npcname("Loki#a2");
			sleep2 3000;
			npctalk "Geffen Academy Master: And the champion of Group B~!!!";
			sleep2 1500;
			donpcevent instance_npcname("Fenrir#f")+"::OnActivate";
			sleep2 1500;
			npctalk "Geffen Academy Master: A Warlock with incredible powers!";
			sleep2 3000;
			npctalk "Geffen Academy Master: A competitor who swept through Group B like a hurricane!";
			sleep2 1000;
			npctalk "Chaos: Oh! This match is going to be exciting!",instance_npcname("Chaos#a2");
			sleep2 2000;
			npctalk "Geffen Academy Master: Is there any Wizard stronger in all of Rune-Midgard?!";
			sleep2 3000;
			npctalk "Geffen Academy Master: The Blue Wizard! Fenris Fenrir~!!";
			break;
	}
	end;
OnTalk1:
	npctalk "Geffen Academy Master: Let's get it on!";
	end;
OnTalk2:
	if ('GMT_1QUE == 22)
		npctalk "Geffen Academy Master: The final match of Group A is finished~! Congratulations "+'charname$+"!";
	else {
		npctalk "Geffen Academy Master: The "+callfunc("F_GetNumSuffix",('GMT_1QUE - 10))+" match of Group A is finished~! Congratulations "+'charname$+"!";
		sleep 6000;
		npctalk "Geffen Academy Master: You may take some time to heal your wounds.";
		sleep 6000;
		npctalk "Geffen Academy Master: Please speak with the Tournament Guide when you are ready for the next round.";
		sleep 3000;
	}
	switch ('GMT_1QUE) {
		case 11:
		case 12:
		case 14:
		case 15:
		case 17:
		case 18:
		case 20:
		case 21:
			break;
		case 13:
			npctalk "Geffen Academy Master: Fenris Fenrir has 3 consecutive victories in Group B~!";
			sleep 3000;
			break;
		case 16:
			npctalk "Geffen Academy Master: Okay~! There is news from Group B!";
			sleep 3000;
			npctalk "Geffen Academy Master: While all of the other competitors are doing their best,";
			sleep 3000;
			npctalk "Geffen Academy Master: Fenrir is taking the tournament by storm, and has won 5 consecutive matches!";
			sleep 1000;
			break;
		case 19:
			npctalk "Geffen Academy Master: This is getting exciting! More news from Group B!";
			sleep 3000;
			npctalk "Geffen Academy Master: Fenris Fenrir is continuing her reign of dominance~! Those in Group A better beware!";
			sleep 2000;
			break;
		case 22:
			npctalk "Geffen Academy Master: Group B has completed their 12th match as well~!";
			sleep 3000;
			npctalk "Geffen Academy Master: Have you heard of Tetra Vortex? There is a competitor using this mysterious spell!";
			sleep 3000;
			npctalk "Geffen Academy Master: Her name is none other than Fenris Fenrir!";
			sleep 3000;
			npctalk "Geffen Academy Master: The final match of this tournament is bound to be challenging!";
			sleep 1000;
			break;
	}
	donpcevent instance_npcname("Tournament Guide#gefMT")+"::OnEnable";
	donpcevent instance_npcname("Tournament Healer#1")+"::OnEnable";
	end;
OnTalk3:
	npctalk "Geffen Academy Master: The Final Round has started! Let's get it on!";
	end;
OnTalk4:
	npctalk "Geffen Academy Master: The Final Match of this year's Geffen Magic Tournament is finished~!";
	sleep 3000;
	npctalk "Geffen Academy Master: Everyone! Thank you for supporting the Geffen Magic Tournament~!!";
	sleep 3000;
	npctalk "Geffen Academy Master: This year's Geffen Magic Tournament Champion is "+'charname$+"~!!";
	donpcevent instance_npcname("#FireworksControl")+"::OnWin";
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,1,1,0	script	#GMTcontroller	-1,{
	end;
OnStart:
	.@map$ = instance_mapname("1@ge_st");
	.@label$ = instance_npcname("#GMTcontroller")+"::OnMyMobDead";
	'timeout = 180;
	if ('GMT_1QUE == 23)
		'timeout = 300;
	mapannounce .@map$,"<Magic Tournament Broadcast>: Time limit is "+('timeout/60)+" minutes.",bc_blue;
	sleep 2000;
	mapannounce .@map$,"<Magic Tournament Broadcast>: Ready... Set...",bc_blue;
	sleep 2000;
	mapannounce .@map$,"<Magic Tournament Broadcast>: Fight!",bc_blue;
	donpcevent instance_npcname("#FireworksControl")+"::OnTurn";
	initnpctimer;
	switch ('GMT_1QUE) {
		case 11:
			donpcevent instance_npcname("Arhi#1")+"::OnDisable";
			monster .@map$,114,50,"--en--",2549,1,.@label$;
			break;
		case 12:
			donpcevent instance_npcname("Dio Anemos#1")+"::OnDisable";
			monster .@map$,114,50,"--en--",2550,1,.@label$;
			break;
		case 13:
			if ('GMTQuest == 1) {
				donpcevent instance_npcname("Geffen Gangster#n1")+"::OnDisable";
				monster .@map$,114,50,"--en--",2553,1,.@label$;
			} else if ('GMTQuest == 2) {
				donpcevent instance_npcname("Geffen Bully#n1")+"::OnDisable";
				monster .@map$,114,50,"--en--",2552,1,.@label$;
			} else {
				donpcevent instance_npcname("Geffen Shoplifter#n1")+"::OnDisable";
				monster .@map$,114,50,"--en--",2551,1,.@label$;
			}
			break;
		case 14:
			donpcevent instance_npcname("Faymont#1")+"::OnDisable";
			monster .@map$,114,50,"--en--",2554,1,.@label$;
			break;
		case 15:
			donpcevent instance_npcname("Ordre#1")+"::OnDisable";
			monster .@map$,114,50,"--en--",2555,1,.@label$;
			break;
		case 16:
			donpcevent instance_npcname("Blut Hase#1")+"::OnDisable";
			monster .@map$,114,50,"--en--",2556,1,.@label$;
			break;
		case 17:
			donpcevent instance_npcname("Kuro Akuma#1")+"::OnDisable";
			monster .@map$,114,50,"--en--",2557,1,.@label$;
			break;
		case 18:
			donpcevent instance_npcname("Ifodes#1")+"::OnDisable";
			monster .@map$,114,50,"--en--",2558,1,.@label$;
			break;
		case 19:
			donpcevent instance_npcname("Licheniyes#1")+"::OnDisable";
			monster .@map$,114,50,"--en--",2559,1,.@label$;
			break;
		case 20:
			donpcevent instance_npcname("Odoric#1")+"::OnDisable";
			monster .@map$,114,50,"--en--",2560,1,.@label$;
			break;
		case 21:
			donpcevent instance_npcname("Ju#1")+"::OnDisable";
			monster .@map$,114,50,"--en--",2561,1,.@label$;
			break;
		case 22:
			if ('half) {
				donpcevent instance_npcname("Dwigh#1")+"::OnDisable";
				monster .@map$,114,50,"--en--",2562,1,.@label$;
			} else {
				donpcevent instance_npcname("Fay Kanavian#1")+"::OnDisable";
				monster .@map$,114,50,"--en--",2563,1,.@label$;
				'FayKanavian = $@mobid[0];
				donpcevent instance_npcname("#GMTHomun")+"::OnSummon";
			}
			break;
		case 23:
			donpcevent instance_npcname("Fenrir#f")+"::OnDisable";
			monster .@map$,114,50,"--en--",2564,1,.@label$;
			donpcevent instance_npcname("Geffen Academy Master")+"::OnTalk3";
			end;
	}
	donpcevent instance_npcname("Geffen Academy Master")+"::OnTalk1";
	end;
OnMyMobDead:
	if (!'timeout2) {
		'timeout_exit = 1;
		switch ('GMT_1QUE) {
			case 11: donpcevent instance_npcname("Arhi#1")+"::OnDefeat"; break;
			case 12: donpcevent instance_npcname("Dio Anemos#1")+"::OnDefeat"; break;
			case 13:
				if ('GMTQuest == 1) { donpcevent instance_npcname("Geffen Gangster#n1")+"::OnDefeat"; }
				else if ('GMTQuest == 2) { donpcevent instance_npcname("Geffen Bully#n1")+"::OnDefeat"; }
				else { donpcevent instance_npcname("Geffen Shoplifter#n1")+"::OnDefeat"; }
				break;
			case 14: donpcevent instance_npcname("Faymont#1")+"::OnDefeat"; break;
			case 15: donpcevent instance_npcname("Ordre#1")+"::OnDefeat"; break;
			case 16: donpcevent instance_npcname("Blut Hase#1")+"::OnDefeat"; break;
			case 17: donpcevent instance_npcname("Kuro Akuma#1")+"::OnDefeat"; break;
			case 18: donpcevent instance_npcname("Ifodes#1")+"::OnDefeat"; break;
			case 19: donpcevent instance_npcname("Licheniyes#1")+"::OnDefeat"; break;
			case 20: donpcevent instance_npcname("Odoric#1")+"::OnDefeat"; break;
			case 21: donpcevent instance_npcname("Ju#1")+"::OnDefeat"; break;
			case 22:
				if ('half)
					donpcevent instance_npcname("Dwigh#1")+"::OnDefeat";
				else {
					donpcevent instance_npcname("Fay Kanavian#1")+"::OnDefeat";
					donpcevent instance_npcname("#GMTHomun")+"::OnEnd";
				}
				break;
			case 23:
				donpcevent instance_npcname("Fenrir#f")+"::OnDefeat";
				donpcevent instance_npcname("Geffen Academy Master")+"::OnTalk4";
				end;
		}
		mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: "+'charname$+" has won the round!",bc_blue;
		donpcevent instance_npcname("Geffen Academy Master")+"::OnTalk2";
	}
	end;
OnTimer1000:
	'timeout--;
	if ('timeout_exit) {
		'timeout_exit = 0;
		stopnpctimer;
		end;
	}
	switch ('timeout) {
		case 240: mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: Time remaining is 4 minutes, this match is getting heated!",bc_blue; break;
		case 180: mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: Time remaining is 3 minutes, the match has gotten extremely heated!",bc_blue; break;
		case 120: mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: Time remaining is 2 minutes, we're racing towards the end!",bc_blue; break;
		case  90: mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: Time remaining is 1 minute 30 seconds, the bout is halfway over!",bc_blue; break;
		case  60: mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: Time remaining is 1 minute, the end of the match is nearing!",bc_blue; break;
		case  30: mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: Time remaining is 30 seconds, turn coming to an end!",bc_blue; break;
		case  10: mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: 10 seconds remaining!",bc_blue; break;
		case   5: mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: 5!",bc_blue; break;
		case   4: mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: 4!",bc_blue; break;
		case   3: mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: 3!",bc_blue; break;
		case   2: mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: 2!",bc_blue; break;
		case   1: mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: 1!",bc_blue; break;
		case   0:
			stopnpctimer;
			donpcevent instance_npcname("#GMTcontroller")+"::OnTimeout2";
			end;
	}
	initnpctimer;
	end;
OnTimeout2:
	'timeout2 = 1;
	mapannounce instance_mapname("1@ge_st"),"<Magic Tournament Broadcast>: Time's up! The judges will decide the victor for this round!",bc_blue;
	killmonster instance_mapname("1@ge_st"),instance_npcname("#GMTcontroller")+"::OnMyMobDead";
	if (unitexist('HomID))
		donpcevent instance_npcname("#GMTHomun")+"::OnReset";
	sleep 3000;
//	npctalk "Geffen Academy Master: The votes are in... And the winner is...",instance_npcname("Geffen Academy Master");
//	sleep 1500;
	.@i = rand(100); .@j = rand(100);
	if (.@j < .@i) {
		.@k = .@j;
		.@j = .@i; .@i = .@k;
	}
	npctalk "Geffen Academy Master: 1st judge's score! "+.@i+" - "+.@j+"",instance_npcname("Geffen Academy Master");
	sleep 1500;
	.@i = rand(100); .@j = rand(100);
	if (.@j < .@i) {
		.@k = .@j;
		.@j = .@i; .@i = .@k;
	}
	npctalk "Geffen Academy Master: 2nd judge's score! "+.@i+" - "+.@j+"",instance_npcname("Geffen Academy Master");
	sleep 1500;
	.@i = rand(100); .@j = rand(100);
	if (.@j < .@i) {
		.@k = .@j;
		.@j = .@i; .@i = .@k;
	}
	npctalk "Geffen Academy Master: 3rd judge's score! "+.@i+" - "+.@j+"",instance_npcname("Geffen Academy Master");
	sleep 1500;
	switch ('GMT_1QUE) {
		case 11:
			donpcevent instance_npcname("Arhi#1")+"::OnEnable";
			donpcevent instance_npcname("Arhi#1")+"::OnVictory";
			.@defeat$ = "The Novice, Arhi!";
			break;
		case 12:
			donpcevent instance_npcname("Dio Anemos#1")+"::OnEnable";
			donpcevent instance_npcname("Dio Anemos#1")+"::OnVictory";
			.@defeat$ = "The Magician Apprentice, Dio Anemos!";
			break;
		case 13:
			if ('GMTQuest == 1) {
				donpcevent instance_npcname("Geffen Gangster#n1")+"::OnEnable";
				donpcevent instance_npcname("Geffen Gangster#n1")+"::OnVictory";
				.@defeat$ = "Geffen Gangster!";
			} else if ('GMTQuest == 2) {
				donpcevent instance_npcname("Geffen Bully#n1")+"::OnEnable";
				donpcevent instance_npcname("Geffen Bully#n1")+"::OnVictory";
				.@defeat$ = "Gefen Bully!";
				break;
			} else {
				donpcevent instance_npcname("Geffen Shoplifter#n1")+"::OnEnable";
				donpcevent instance_npcname("Geffen Shoplifter#n1")+"::OnVictory";
				.@defeat$ = "Geffen Shoplifter!";
				break;
			}
			break;
		case 14:
			donpcevent instance_npcname("Faymont#1")+"::OnEnable";
			donpcevent instance_npcname("Faymont#1")+"::OnVictory";
			.@defeat$ = "Prontera's pride and style, Feymont!";
			break;
		case 15:
			donpcevent instance_npcname("Ordre#1")+"::OnEnable";
			donpcevent instance_npcname("Ordre#1")+"::OnVictory";
			.@defeat$ = "Self proclaimed Master of Battle, Ordre!";
			break;
		case 16:
			donpcevent instance_npcname("Blut Hase#1")+"::OnEnable";
			donpcevent instance_npcname("Blut Hase#1")+"::OnVictory";
			.@defeat$ = "Bloody Rabbit Ears~!! Blut Hase!";
			break;
		case 17:
			donpcevent instance_npcname("Kuro Akuma#1")+"::OnEnable";
			donpcevent instance_npcname("Kuro Akuma#1")+"::OnVictory";
			.@defeat$ = "The Devil's Tooth! Kuro Akuma!";
			break;
		case 18:
			donpcevent instance_npcname("Ifodes#1")+"::OnEnable";
			donpcevent instance_npcname("Ifodes#1")+"::OnVictory";
			.@defeat$ = "The Maniac of Rune Mindgard! Ifodes!";
			break;
		case 19:
			donpcevent instance_npcname("Licheniyes#1")+"::OnEnable";
			donpcevent instance_npcname("Licheniyes#1")+"::OnVictory";
			.@defeat$ = "The Lady of Death! Licheniyes!";
			break;
		case 20:
			donpcevent instance_npcname("Odoric#1")+"::OnEnable";
			donpcevent instance_npcname("Odoric#1")+"::OnVictory";
			.@defeat$ = "The Songstress of Death! Odoric!";
			break;
		case 21:
			donpcevent instance_npcname("Ju#1")+"::OnEnable";
			donpcevent instance_npcname("Ju#1")+"::OnVictory";
			.@defeat$ = "Master of power and speed! Ju!";
			break;
		case 22:
			if ('half) {
				donpcevent instance_npcname("Dwigh#1")+"::OnEnable";
				donpcevent instance_npcname("Dwigh#1")+"::OnVictory";
				.@defeat$ = "Commander of battle and wits! Dwigh!";
			} else {
				donpcevent instance_npcname("Fay Kanavian#1")+"::OnEnable";
				donpcevent instance_npcname("Fay Kanavian#1")+"::OnVictory";
				.@defeat$ = "Fay Kanavian and her homunculus Alphonse!";
			}
			break;
		case 23:
			donpcevent instance_npcname("Fenrir#f")+"::OnEnable";
			donpcevent instance_npcname("Fenrir#f")+"::OnVictory";
			.@defeat$ = "The Blue Wizard! Fenris Fenrir~!!";
			break;
	}
	npctalk "Geffen Academy Master: The winner of the "+callfunc("F_GetNumSuffix",('GMT_1QUE - 10))+" match in Group A by judge's decision is...! "+.@defeat$,instance_npcname("Geffen Academy Master");
	sleep 1500;
	//donpcevent instance_npcname("#DEATHGMT")+"::OnLoseRound";
	npctalk "Geffen Academy Master: Give a warm round of applause to the losing competitor.",instance_npcname("Geffen Academy Master");
	sleep 1500;
	npctalk "Geffen Academy Master: Defeated competitors please leave the arena!",instance_npcname("Geffen Academy Master");
	sleep 3000;
	donpcevent instance_npcname("#gefmagic_warp02")+"::OnEnable";
	donpcevent instance_npcname("#invisGMTquests")+"::OnEnable";
	donpcevent instance_npcname("Fenrir#e1")+"::OnEnable";
	donpcevent instance_npcname("Chaos#e1")+"::OnEnable";
	donpcevent instance_npcname("Iris#e1")+"::OnEnable";
	donpcevent instance_npcname("Lydia#e1")+"::OnEnable";
	donpcevent instance_npcname("Loki#e1")+"::OnEnable";
	end;
OnStop:
	stopnpctimer;
	end;
}

1@ge_st,1,1,0	script	#GMTHomun	-1,{
	end;
OnSummon:
	initnpctimer;
	monster instance_mapname("1@ge_st"),111,50,"--en--",2565,1,instance_npcname("#GMTHomun")+"::OnMyMobDead";
	'HomID = $@mobid[0];
	end;
OnTimer10000:
	if (!unitexist('FayKanavian)) {
		stopnpctimer;
		end;
	}
	if (unitexist('HomID)) {
		getunitdata 'FayKanavian,.@arr;
		if (distance(.@arr[UMOB_X],.@arr[UMOB_Y],.@arr[UMOB_X],.@arr[UMOB_Y]) > 10) {
			unittalk 'FayKanavian,"Alphonse, come!";
			sleep 500;
			unitwarp 'HomID,instance_mapname("1@ge_st"),.@arr[UMOB_X],.@arr[UMOB_Y];
		}
	} else {
		if (mobcount(instance_mapname("1@ge_st"),instance_npcname("#GMTHomun")+"::OnMyMobDead2"))
			end;
		getunitdata 'FayKanavian,.@arr;
		unittalk 'FayKanavian,"Alphonse, I'll revive you!";
		areamonster instance_mapname("1@ge_st"),.@arr[UMOB_X]-2,.@arr[UMOB_Y]-2,.@arr[UMOB_X]+2,.@arr[UMOB_Y]+2,"--en--",2566,3,instance_npcname("#GMTHomun")+"::OnMyMobDead2";
	}
	initnpctimer;
	end;
OnReset:
	killmonster instance_mapname("1@ge_st"),instance_npcname("#GMTHomun")+"::OnMyMobDead";
	killmonster instance_mapname("1@ge_st"),instance_npcname("#GMTHomun")+"::OnMyMobDead2";
	end;
OnMyMobDead:
	if (!'timeout2)
		initnpctimer;
	end;
OnMyMobDead2:
	end;
OnEnd:
	stopnpctimer;
	donpcevent instance_npcname("#GMTHomun")+"::OnReset";
	end;
}

1@ge_st,111,57,4	script	Tournament Healer#1	4_F_NURSE,{ //83649 (hide)
	mes "[Tournament Healer]";
	mes "The previous round's winner can receive a heal from me.";
	next;
	if (select ("Heal","Cancel") == 2) {
		mes "[Tournament Healer]";
		mes "Guess you don't need to be healed.";
		close;
	}
	mes "[Tournament Healer]";
	mes "Enjoy.";
	mes "Good luck on the next round!";
	percentheal 100,100;
	specialeffect2 EF_HEAL;
	close2;
	donpcevent instance_npcname("Tournament Healer#1")+"::OnDisable";
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,1,1,0	script	#FireworksControl	-1,{
	end;
OnStart:
	initnpctimer;
	for (.@i = 11; .@i <= 20; .@i++)
		specialeffect .effect[rand(getarraysize(.effect))],AREA,instance_npcname("#fireworks_" +.@i);
	end;
OnTimer6000:
	initnpctimer;
	for (.@i = 0; .@i < 5; .@i++)
		specialeffect .effect[rand(getarraysize(.effect))],AREA,instance_npcname("#fireworks_"+rand(11,20));
	end;
OnTurn:
	stopnpctimer;
	end;
OnWin:
	for (.@i = 1; .@i <= 5; .@i++)
		specialeffect EF_LORD,AREA,instance_npcname("#fireworks_f"+.@i);
	sleep 3000;
	for (.@i = 1; .@i <= 5; .@i++)
		specialeffect EF_SIGHTRASHER,AREA,instance_npcname("#fireworks_f"+.@i);
	sleep 500;
	for (.@i = 1; .@i <= 5; .@i++)
		specialeffect EF_STORMGUST,AREA,instance_npcname("#fireworks_f"+.@i);
	sleep 3000;
	for (.@i = 1; .@i <= 5; .@i++)
		specialeffect EF_VIOLENTGALE,AREA,instance_npcname("#fireworks_f"+.@i);
	end;
OnInstanceInit:
	setarray .effect,EF_THUNDERSTORM,EF_STORMGUST,EF_METEORSTORM;
	end;
}

1@ge_st,102,42,0	script	#fireworks_11	HIDDEN_WARP_NPC,{ end; }
1@ge_st,100,60,0	duplicate(#fireworks_11)	#fireworks_12	HIDDEN_WARP_NPC
1@ge_st,109,60,0	duplicate(#fireworks_11)	#fireworks_13	HIDDEN_WARP_NPC
1@ge_st,118,60,0	duplicate(#fireworks_11)	#fireworks_14	HIDDEN_WARP_NPC
1@ge_st,126,59,0	duplicate(#fireworks_11)	#fireworks_15	HIDDEN_WARP_NPC
1@ge_st,126,37,0	duplicate(#fireworks_11)	#fireworks_16	HIDDEN_WARP_NPC
1@ge_st,118,36,0	duplicate(#fireworks_11)	#fireworks_17	HIDDEN_WARP_NPC
1@ge_st,109,36,0	duplicate(#fireworks_11)	#fireworks_18	HIDDEN_WARP_NPC
1@ge_st,100,36,0	duplicate(#fireworks_11)	#fireworks_19	HIDDEN_WARP_NPC
1@ge_st,92,37,0	duplicate(#fireworks_11)	#fireworks_20	HIDDEN_WARP_NPC
1@ge_st,112,52,0	duplicate(#fireworks_11)	#fireworks_f1	HIDDEN_WARP_NPC
1@ge_st,112,42,0	duplicate(#fireworks_11)	#fireworks_f2	HIDDEN_WARP_NPC
1@ge_st,102,52,0	duplicate(#fireworks_11)	#fireworks_f3	HIDDEN_WARP_NPC
1@ge_st,102,52,0	duplicate(#fireworks_11)	#fireworks_f4	HIDDEN_WARP_NPC
1@ge_st,102,42,0	duplicate(#fireworks_11)	#fireworks_f5	HIDDEN_WARP_NPC

1@ge_st,1,1,0	script	#Talkcontrol	-1,{
	end;
OnStart:
	'Talkcounter = 0;
	initnpctimer;
	end;
OnTimer5000:
	'Talkcounter++;
	if ('Talkcounter <4)
		initnpctimer;
OnRndtalk:
	.@iter = rand(1,3);
	for (.@i = 0; .@i < .@iter ; .@i++) {
		.@group = rand(30);
		if (.@group < 18) {
			showscript 'audience$[rand(getarraysize('audience$))],getnpcid(0,instance_npcname("Tournament Spectator#"+rand(70,257)));
			showscript 'audience$[rand(getarraysize('audience$))],getnpcid(0,instance_npcname("Tournament Spectator#"+rand(70,257)));
		} else if (.@group < 23)
			showscript 'student$[rand(getarraysize('student$))],getnpcid(0,instance_npcname("Magic Academy Student#"+rand(1,5)));
		else {
			.@id = rand(getarraysize('tourist$));
			showscript 'touristname2$[.@id]+'tourist$[.@id],getnpcid(0,instance_npcname('touristname$[.@id]));
		}
		sleep rand(2,5) * 100;
	}
	end;
OnTimer13000:
	stopnpctimer;
	.@iter = rand(1,3);
	for (.@i = 0; .@i < .@iter; .@i++) {
		.@group = rand(30);
		if (.@group < 18) {
			showscript 'audience$[rand(getarraysize('audience$))],getnpcid(0,instance_npcname("Tournament Spectator#"+rand(70,257)));
			showscript 'audience$[rand(getarraysize('audience$))],getnpcid(0,instance_npcname("Tournament Spectator#"+rand(70,257)));
		} else if (.group < 23)
			showscript 'student$[rand(getarraysize('student$))],getnpcid(0,instance_npcname("Magic Academy Student#"+rand(1,5)));
		else {
			.@id = rand(getarraysize('tourist$));
			showscript 'touristname2$[.@id]+'tourist$[.@id],getnpcid(0,instance_npcname('touristname$[.@id]));
		}
		sleep rand(2,5)*100;
	}
	end;
OnInstanceInit:
	setarray 'audience$,
		"Tournament Spectator: I've been watiing for this round!",
		"Tournament Spectator: Hope this round's an interesting match up!",
		"Tournament Spectator: Oh! Ah! Oh! Ah!",
		"Tournament Spectator: Oooh,finally started!",
		"Tournament Spectator: Start already! Fight! Come on, start!",
		"Tournament Spectator: Is this that guy's first time? I feel he's very powerful, ah!",
		"Tournament Spectator: Who do you think will win?",
		"Tournament Spectator: Come on,start!",
		"Tournament Spectator: Get it on already!",
		"Tournament Spectator: I feel like I'm in danger...",
		"Tournament Spectator: I'm counting on that "+('sex ? "guy" : "girl")+" to lose!",
		"Tournament Spectator: Gotta feel sorry for that guy! Come on!",
		"Tournament Spectator: He's terrific! You've got this! Come on!",
		"Tournament Spectator: I'm having such a great time here!",
		"Tournament Spectator: Come on!~~",
		"Tournament Spectator: Let's see what you've got "+'charname$+"!",
		"Tournament Spectator: He's probably going to lose this round.",
		"Tournament Spectator: This contest has a lot of good participants.",
		"Tournament Spectator: Do not be afraid,come on!",
		"Tournament Spectator: Almost to start huh?",
		"Tournament Spectator: Even just watching this is fun!",
		"Tournament Spectator: My hands are sweating...",
		"Tournament Spectator: Come on let's go!";
	setarray 'student$,
		"Magic Academy Student: Ya~ Hoo~",
		"Magic Academy Student: Wow, I'm so nervous!",
		"Magic Academy Student: Both of you please! Come on!";
	setarray 'tourist$,
		": Oh,the atmosphere's starting to heat up...",
		": This is so energizing!",
		": There's no Payon contestants are there?",
		": The atmosphere here is great!",
		": Oooh! Come on!",
		": These participants are so energetic!",
		": Good thing too...",
		": Don't lose too quickly! Oh!~";
	setarray 'touristname$,
		"Prontera Spectator#a1",
		"Prontera Spectator#a2",
		"Payon Spectator#a1",
		"Payon Spectator#a2",
		"Alberta Spectator#a1",
		"Alberta Spectator#a2",
		"Veins Spectator#a1",
		"Comodo Spectator#a1";
	setarray 'touristname2$,
		"Prontera Spectator",
		"Prontera Spectator",
		"Payon Spectator",
		"Payon Spectator",
		"Alberta Spectator",
		"Alberta Spectator",
		"Veins Spectator",
		"Comodo Spectator";
		end;
}

1@ge_st,106,62,6	script	Loki#a2	4_M_ROKI2,{ end; }
1@ge_st,108,62,6	script	Chaos#a2	4_M_CHAOS,{ end; }
1@ge_st,111,62,4	script	Iris#a2	4_F_IRIS,{ end; }
1@ge_st,112,62,4	script	Lydia#a2	4_F_LYDIA,{ end; }

1@ge_st,114,50,4	script	Arhi#1	4_GEFFEN_02,{
	end;
OnActivate:
	npctalk "Arhi: The first match always makes me nervous~!";
	sleep 2000;
	npctalk "Arhi: Can I win?";
	sleep 3000;
	npctalk "Arhi: I guess it will be okay, this "+('sex ? "guy" : "girl")+" seems weak.";
	sleep 3000;
	npctalk "Arhi: Okay, just relax~!";
	sleep 3000;
	npctalk "Arhi: Ah... Finally, It's going to start soon!";
	sleep 3000;
	npctalk "Arhi: Just relax~!";
	sleep 2000;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	sleep 1000;
	npctalk "Arhi: Ah... I lost the first match...";
	sleep 3000;
	npctalk "Arhi: How can I face my family...";
	sleep 3000;
	npctalk "Arhi: So shameful...";
	sleep 3000;
	npctalk "Arhi: Ah... My friends will laugh at me...";
	sleep 3000;
	npctalk "Arhi: Sob...";
	sleep 1000;
	donpcevent instance_npcname("Arhi#1")+"::OnDisable";
	sleep 1000;
	donpcevent instance_npcname("Arhi#z1_0et")+"::OnEnable";
	donpcevent instance_npcname("Tournament Guide#gefMT")+"::OnEnable";
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnVictory:
	npctalk "Arhi: I knew I would win!";
	sleep 3000;
	npctalk "Arhi: I'm so relieved!";
	sleep 3000;
	npctalk "Arhi: I was able to beat a weak competitior.";
	sleep 3000;
	npctalk "Arhi: Yahoo!";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Dio Anemos#1	4_GEFFEN_01,{
	end;
OnActivate:
	npctalk "Dio Anemos: Second round huh...";
	sleep 2000;
	npctalk "Dio Anemos: You look like a weak competitor.";
	sleep 3000;
	npctalk "Dio Anemos: I think I've got a good chance against you.";
	sleep 3000;
	npctalk "Dio Anemos: I wish the match would start already...";
	sleep 3000;
	npctalk "Dio Anemos: If I finish it quickly maybe I can go buy some cookies!";
	sleep 3000;
	npctalk "Dio Anemos: Okay then let's start!";
	sleep 2000;
	npctalk "Loki: Boring...",instance_npcname("Loki#a2");
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname("Dio Anemos#1")+"::OnEnable";
	sleep 1000;
	npctalk "Dio Anemos: Oh my god....";
	sleep 2000;
	npctalk "Dio Anemos: I lost...";
	sleep 2000;
	npctalk "Dio Anemos: Ah... and to this random loser too...";
	sleep 3000;
	npctalk "Dio Anemos: My skills have gotten worse...";
	sleep 3000;
	npctalk "Dio Anemos: This is so sad...";
	sleep 2000;
	npctalk "Dio Anemos: Ahhhh! Why?...";
	sleep 1000;
	donpcevent instance_npcname("Dio Anemos#1")+"::OnDisable";
	sleep 1000;
	donpcevent instance_npcname("Dio Anemos#z1_0et")+"::OnEnable";
	donpcevent instance_npcname("Dio Anemos#1")+"::OnDisable";
	end;
OnVictory:
	npctalk "Dio Anemos: Phew... That was easy.";
	sleep 3000;
	npctalk "Dio Anemos: You should go home and ask your mommy to feed you!";
	sleep 3000;
	npctalk "Dio Anemos: Ha ha ha ha~!!!!";
	sleep 3000;
	npctalk "Dio Anemos: Time to get ready for my next match.";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Geffen Gangster#n1	4_GEFFEN_14,{
	end;
OnActivate:
	npctalk "Geffen Gangster: Hmmm, you're that kid from before...";
	sleep 2000;
	npctalk "Geffen Gangster: I've got a lesson to teach you!";
	sleep 3000;
	npctalk "Geffen Gangster: It's my turn to beat you!";
	sleep 3000;
	npctalk "Geffen Gangster: First I'll take care of you, and then I'll go back for that Kafra...";
	sleep 3000;
	npctalk "Geffen Gangster: Watcha got punk?!";
	sleep 3000;
	npctalk "Geffen Gangster: Prepare to die!";
	sleep 2000;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname("Geffen Gangster#n1")+"::OnEnable";
	sleep 1000;
	npctalk "Geffen Gangster: I was defeated! This doesn't make any sense!";
	sleep 2000;
	npctalk "Geffen Gangster: I can't believe I lost to you!";
	sleep 3000;
	npctalk "Geffen Gangster: To be embarrassed in front of the Kafra with the luscious legs...!";
	sleep 3000;
	npctalk "Geffen Gangster: Sob.. This can't be happening!";
	sleep 2000;
	npctalk "Geffen Gangster: I shouldn't have to go through this depression alone!";
	sleep 2000;
	npctalk "Geffen Gangster: I'll have to go to see the Kafra gal' in Prontera hu-hu-hu...";
	sleep 1000;
	donpcevent instance_npcname("Geffen Gangster#n1")+"::OnDisable";
	end;
OnVictory:
	npctalk "Geffen Gangster: This is my real ability!";
	sleep 3000;
	npctalk "Geffen Gangster: Hu hu... That... Kafra...!";
	sleep 3000;
	npctalk "Geffen Gangster: I want to go back to my Kafra~!!";
	sleep 3000;
	npctalk "Geffen Gangster: Hu hu hu hu hu...";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Geffen Bully#n1	4_GEFFEN_13,{
	end;
OnActivate:
	npctalk "Geffen Bully: Just you wait, you'll be immediately disabled!";
	sleep 2000;
	npctalk "Geffen Bully: I will beat you down today!";
	sleep 3000;
	npctalk "Geffen Bully: Give me your zeny!";
	sleep 3000;
	npctalk "Geffen Bully: I'll send you crying home!";
	sleep 3000;
	npctalk "Geffen Bully: I will make you experience my 20 years of bullying.";
	sleep 3000;
	npctalk "Geffen Bully: You're dead!";
	sleep 2000;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname("Geffen Bully#n1")+"::OnEnable";
	sleep 1000;
	npctalk "Geffen Bully: I can't believe you beat me...";
	sleep 3000;
	npctalk "Geffen Bully: It can't be!";
	sleep 3000;
	npctalk "Geffen Bully: This can't be! I only wanted to get more zeny!";
	sleep 3000;
	npctalk "Geffen Bully: Now I'll be the laughing stock of all of Geffen!";
	sleep 3000;
	npctalk "Geffen Bully: Ah! Ahhh!! It can't be!!!";
	sleep 1000;
	donpcevent instance_npcname("Geffen Bully#n1")+"::OnDisable";
	end;
OnVictory:
	npctalk "Geffen Bully: You! Hou much zeny do you have left?";
	sleep 3000;
	npctalk "Geffen Bully: You messed with me once before!";
	sleep 3000;
	npctalk "Geffen Bully: And now I've left you speechless!";
	sleep 3000;
	npctalk "Geffen Bully: Never show your face in Geffen again!";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Geffen Shoplifter#n1	4_GEFFEN_03,{
	end;
OnActivate:
	npctalk "Geffen Shoplifter: There are so many people gathered here.";
	sleep 2000;
	npctalk "Geffen Shoplifter: I thought there'd be something good to steal here";
	sleep 3000;
	npctalk "Geffen Shoplifter: But I can't steal anything because of all the attention it'll cause.";
	sleep 3000;
	npctalk "Geffen Shoplifter: Ah... This is no good...";
	sleep 3000;
	npctalk "Geffen Shoplifter: I guess I'll just participate in the tournament...";
	sleep 3000;
	npctalk "Geffen Shoplifter: Well~! Let's win anyway!";
	sleep 2000;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname("Geffen Shoplifter#n1")+"::OnEnable";
	sleep 1000;
	npctalk "Geffen Shoplifter: Oh my god... I was defeated.";
	sleep 2000;
	npctalk "Geffen Shoplifter: I have been spending too much time stealing.";
	sleep 2000;
	npctalk "Geffen Shoplifter: My battle power has been reduced.";
	sleep 3000;
	npctalk "Geffen Shoplifter: Ah... It can't be...";
	sleep 2000;
	npctalk "Geffen Shoplifter: I'll need to train more if I want to keep my position as Guild Leader...";
	sleep 3000;
	npctalk "Geffen Shoplifter: Fine, I'm outta here!";
	sleep 1000;
	donpcevent instance_npcname("Geffen Shoplifter#n1")+"::OnDisable";
	end;
OnVictory:
	npctalk "Geffen Shoplifter: I know, I'm really good.";
	sleep 3000;
	npctalk "Geffen Shoplifter: Okay! Time to keep winning~!!";
	sleep 3000;
	npctalk "Geffen Shoplifter: I should take as many rewards as possible~!";
	sleep 3000;
	npctalk "Geffen Shoplifter: You should go home~ Bye~!";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Faymont#1	4_GEFFEN_04,{
	end;
OnActivate:
	npctalk "Faymont: Well would you look at that... this competitor seems...";
	sleep 2000;
	npctalk "Faymont: Like he's just gotten lucky up until now!";
	sleep 3000;
	npctalk "Faymont: I really don't want to get my hands dirty.";
	sleep 3000;
	npctalk "Faymont: I'll handle this in a sophisticated way...";
	sleep 3000;
	npctalk "Faymont: Ahem... Looks like we're about to start now.";
	sleep 3000;
	npctalk "Faymont: Maybe if I finish this quickly, I can buy that new headdress...";
	npctalk "Prontera Spectator: Come on!",instance_npcname("Prontera Spectator#a1");
	sleep 2000;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname("Faymont#1")+"::OnEnable";
	sleep 1000;
	npctalk "Faymont: How could... How could I lose?!...";
	sleep 2000;
	npctalk "Faymont: And to the one "+('sex ? "guy" : "girl")+" with no taste...";
	sleep 2000;
	npctalk "Faymont: How shameful...";
	sleep 2000;
	npctalk "Faymont: My fans will be disappointed at me for losing...";
	sleep 3000;
	npctalk "Faymont: Ahh.... What's the quickest way out of here?";
	sleep 3000;
	npctalk "Faymont: I can't show my face around here any longer...";
	sleep 1000;
	donpcevent instance_npcname("Faymont#1")+"::OnDisable";
	sleep 1000;
	donpcevent instance_npcname("Faymont#z1_0et")+"::OnEnable";
	end;
OnVictory:
	npctalk "Faymont: Can you see the difference between you and me? Noble and shallow.";
	sleep 3000;
	npctalk "Faymont: This tournament is pointless.";
	sleep 3000;
	npctalk "Faymont: What kind of shallow man will I have to fight with next?";
	sleep 3000;
	npctalk "Faymont: No matter,I'll just prepare for the next match.";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Ordre#1	4_GEFFEN_05,{
	end;
OnActivate:
	npctalk "Ordre: One! Two! One! Two!";
	sleep 2000;
	npctalk "Ordre: Let's climb the ladder one step at a time!";
	sleep 2000;
	npctalk "Ordre: I've been training so hard!";
	sleep 3000;
	npctalk "Ordre: I'm not about to give up now!";
	sleep 3000;
	npctalk "Ordre: I can't lose after coming so far";
	sleep 3000;
	npctalk "Ordre: Now~! Let's do our best for those in the audience!";
	sleep 3000;
	npctalk "Ordre: Shall we begin?";
	npctalk "Chaos: What? Is this really the level of competition?",instance_npcname("Chaos#a2");
	sleep 2000;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname("Ordre#1")+"::OnEnable";
	sleep 1000;
	npctalk "Ordre: Defeated...";
	sleep 2000;
	npctalk "Ordre: I need more practice...";
	sleep 2000;
	npctalk "Ordre: I need more training...";
	sleep 3000;
	npctalk "Ordre: I'll train twice as hard as before!";
	sleep 3000;
	npctalk "Ordre: I must start over.";
	sleep 2000;
	npctalk "Ordre: Let's go.";
	sleep 1000;
	donpcevent instance_npcname("Ordre#1")+"::OnDisable";
	sleep 1000;
	donpcevent instance_npcname("Ordre#z1_0et")+"::OnEnable";
	end;
OnVictory:
	npctalk "Ordre: I won!";
	sleep 3000;
	npctalk "Ordre: As long as you try... you can get what you want!";
	sleep 3000;
	npctalk "Ordre: Let's show respect to this competition!";
	sleep 3000;
	npctalk "Ordre: I'm ready for the next match!!";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Blut Hase#1	4_GEFFEN_06,{
	end;
OnActivate:
	npctalk "Blut Hase: You've gotten this far.";
	sleep 2000;
	npctalk "Blut Hase: I imagine by now the rest of the competitors are quite strong";
	sleep 3000;
	npctalk "Blut Hase: But I did not build my reputation for nothing!";
	sleep 3000;
	npctalk "Blut Hase: Fear my Bunny Band!";
	sleep 3000;
	npctalk "Blut Hase: You are but an obstacle in my way!";
	sleep 1000;
	donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
	sleep 2000;
	npctalk "Blut Hase: You will be sacrificed on my path to victory!";
	sleep 1000;
	donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
	sleep 1000;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname("Blut Hase#1")+"::OnEnable";
	sleep 1000;
	npctalk "Blut Hase: I will not lose!";
	sleep 1000;
	npctalk "Blut Hase: My reputation... My popularity...";
	sleep 3000;
	npctalk "Blut Hase: I will lose them both...";
	sleep 3000;
	npctalk "Blut Hase: I cannot accept this result!";
	sleep 3000;
	npctalk "Blut Hase: I will regain my reputation!";
	sleep 2000;
	npctalk "Blut Hase: Next time I will be the winner!";
	sleep 1000;
	donpcevent instance_npcname("Blut Hase#1")+"::OnDisable";
	sleep 1000;
	donpcevent instance_npcname("Blut Hase#z1_0et")+"::OnEnable";
	end;
OnVictory:
	npctalk "Blut Hase: In terms of reputation or popularity...";
	sleep 3000;
	npctalk "Blut Hase: It was impossible for me to lose!";
	sleep 3000;
	npctalk "Blut Hase: I will be known as Ultra Rabbit's Blood instead of Rabbit's Bloody Ear now!";
	sleep 3000;
	npctalk "Blut Hase: Ha ha ha ha ha~!!";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Kuro Akuma#1	4_GEFFEN_07,{
	end;
OnActivate:
	npctalk "Kuro Akuma: Finally the 7th game has started ~!";
	sleep 2000;
	npctalk "Kuro Akuma: You've never met anyone as evil as me ~!";
	sleep 3000;
	npctalk "Kuro Akuma: You are lucky~!";
	sleep 3000;
	npctalk "Kuro Akuma: This will be a good experience for you~!";
	sleep 3000;
	npctalk "Kuro Akuma: Nobody who's faced me has ever survived~!";
	sleep 3000;
	npctalk "Kuro Akuma: I will destroy you if I must~!";
	sleep 1000;
	donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
	sleep 1000;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname("Kuro Akuma#1")+"::OnEnable";
	sleep 1000;
	npctalk "Kuro Akuma: Oh my god...";
	sleep 3000;
	npctalk "Kuro Akuma: I am The Devil's Tooth...";
	sleep 2000;
	npctalk "Kuro Akuma: And I have lost this match...";
	sleep 3000;
	npctalk "Kuro Akuma: Yach, yikes, ah, ah, ah! Yikes ah, ah, ah!!";
	sleep 3000;
	npctalk "Kuro Akuma: I can't lose! I'll have my revenge!";
	sleep 2000;
	donpcevent instance_npcname("Kuro Akuma#1")+"::OnDisable";
	sleep 1000;
	donpcevent instance_npcname("Kuro Akuma#z1_0et")+"::OnEnable";
	end;
OnVictory:
	npctalk "Kuro Akuma: How is it~! My Power~!";
	sleep 3000;
	npctalk "Kuro Akuma: I took pity on you and decided not to send you to hell~!";
	sleep 3000;
	npctalk "Kuro Akuma: You should appreciate that!";
	sleep 3000;
	npctalk "Kuro Akuma: Now,I shall prepare for my next match~!";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Ifodes#1	4_GEFFEN_08,{
	end;
OnActivate:
	npctalk "Ifodes: At long last, the 8th game has started.";
	sleep 2000;
	npctalk "Ifodes: No one can pierce my defenses!";
	sleep 3000;
	npctalk "Ifodes: But I can surely get past yours.";
	sleep 3000;
	npctalk "Ifodes: Therefore, you stand no chance!";
	sleep 3000;
	npctalk "Ifodes: Once the match has started, your laughter will turn into tears!";
	sleep 3000;
	npctalk "Ifodes: Shall we start?";
	sleep 1000;
	donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
	sleep 1000;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname("Ifodes#1")+"::OnEnable";
	sleep 1000;
	npctalk "Ifodes: I will not lose this tournament!";
	sleep 3000;
	npctalk "Ifodes: This is nonsense.";
	sleep 2000;
	npctalk "Ifodes: How could this happen?";
	sleep 3000;
	npctalk "Ifodes: I can't understand!";
	sleep 3000;
	npctalk "Ifodes: Arrgggh!";
	sleep 2000;
	donpcevent instance_npcname("Ifodes#1")+"::OnDisable";
	sleep 1000;
	donpcevent instance_npcname("Ifodes#z1_0et")+"::OnEnable";
	end;
OnVictory:
	npctalk "Ifodes: You can't penetrate my defense!";
	sleep 3000;
	npctalk "Ifodes: You can't even protect yourself from my powerful attacks!";
	sleep 3000;
	npctalk "Ifodes: Wahahaha~!!";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Licheniyes#1	4_GEFFEN_09,{
	end;
OnActivate:
	npctalk "Licheniyes: Ho ho ho~!!";
	sleep 2000;
	npctalk "Licheniyes: The competitor of the 9th match looks scary~!";
	sleep 3000;
	npctalk "Licheniyes: You don't scare me though~!";
	sleep 3000;
	npctalk "Licheniyes: I'm a lady~!";
	sleep 3000;
	npctalk "Licheniyes: But once this match starts...!";
	sleep 3000;
	npctalk "Licheniyes: *Giggling*... I will bite you!";
	sleep 1000;
	npctalk "Payon Spectator: Good horror players ...",instance_npcname("Payon Spectator#a1");
	sleep 1000;
	npctalk "Prontera Spectator: Do not be afraid ah, dark horse contestant!",instance_npcname("Prontera Spectator#a1");
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname("Licheniyes#1")+"::OnEnable";
	sleep 1000;
	npctalk "Licheniyes: You try to beat me with cruelty, a lady like me...";
	sleep 3000;
	npctalk "Licheniyes: I am very sad...";
	sleep 2000;
	npctalk "Licheniyes: Sob...";
	sleep 3000;
	npctalk "Licheniyes: But, next time we meet...";
	sleep 3000;
	npctalk "Licheniyes: I will destroy you with little effort!";
	sleep 1000;
	donpcevent instance_npcname("Licheniyes#1")+"::OnDisable";
	sleep 1000;
	donpcevent instance_npcname("Licheniyes#z1_0et")+"::OnEnable";
	end;
OnVictory:
	npctalk "Licheniyes: Oh ho ho ho~~! I knew I would win~!";
	sleep 3000;
	npctalk "Licheniyes: Oh my! Oh my! I am very sorry~!";
	sleep 3000;
	npctalk "Licheniyes: Ah, Ah~ I need to prepare next match!";
	sleep 3000;
	npctalk "Licheniyes: I'm so giddy to find out who I'm up against next!~";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Odoric#1	4_GEFFEN_10,{
	end;
OnActivate:
	npctalk "Odoric: Lu lu~ What a fun tournament!";
	sleep 2000;
	npctalk "Odoric: Dance~ Dance~ Bewitching dance~!";
	sleep 3000;
	npctalk "Odoric: Everyone is mesmerized by my magical dance!";
	sleep 3000;
	npctalk "Odoric: You will be captured by my charm~!";
	sleep 3000;
	npctalk "Odoric: Now,feast on my magical dance!";
	sleep 3000;
	npctalk "Odoric: Lah, Lah, Lah, Lah~~!";
	sleep 1000;
	npctalk "Veins Spectator: How beautiful!",instance_npcname("Veins Spectator#a1");
	sleep 1000;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname("Odoric#1")+"::OnEnable";
	sleep 1000;
	npctalk "Odoric: Sob...";
	sleep 3000;
	npctalk "Odoric: I lost, even though I did my best...";
	sleep 2000;
	npctalk "Odoric: My charming poses...";
	sleep 3000;
	npctalk "Odoric: They didn't work... Sob...";
	sleep 3000;
	npctalk "Odoric: I'm so sad that I lost here...";
	sleep 2000;
	npctalk "Odoric: I have to leave~!";
	sleep 1000;
	donpcevent instance_npcname("Odoric#1")+"::OnDisable";
	sleep 1000;
	donpcevent instance_npcname("Odoric#z1_0et")+"::OnEnable";
	end;
OnVictory:
	npctalk "Odoric: Even you... Against my fascinating dance moves...";
	sleep 3000;
	npctalk "Odoric: You're nothing special~!!";
	sleep 3000;
	npctalk "Odoric: You did a good job getting to this point~!!";
	sleep 3000;
	npctalk "Odoric: I need to get ready for my next match now~";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Ju#1	4_GEFFEN_11,{
	end;
OnActivate:
	npctalk "Ju: Another match has started...";
	sleep 2000;
	npctalk "Ju: A real battle is a serious matter...";
	sleep 3000;
	npctalk "Ju: It is something to be feared!";
	sleep 3000;
	npctalk "Ju: All of these novices who spent their time only training";
	sleep 3000;
	npctalk "Ju: They will never know the true meaning of battle!";
	sleep 3000;
	npctalk "Ju: I will make sure to handle them as fast as possible.";
	sleep 2000;
	npctalk "Lydia: My heart is beating so fast! I'm so nervous!",instance_npcname("Lydia#a2");
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	end;
OnDefeat:
	donpcevent instance_npcname("Ju#1")+"::OnEnable";
	sleep 1000;
	npctalk "Ju: Sob... defeated...";
	sleep 3000;
	npctalk "Ju: You're stronger than I thought...";
	sleep 3000;
	npctalk "Ju: You must have experienced many cruel battles.";
	sleep 3000;
	npctalk "Ju: Sob... Victory was the only thing in my mind...";
	sleep 3000;
	npctalk "Ju: I wish you luck on your following matches.";
	sleep 3000;
	npctalk "Ju: You better not lose after defeating me!";
	sleep 2000;
	donpcevent instance_npcname("Ju#1")+"::OnDisable";
	sleep 1000;
	donpcevent instance_npcname("Ju#z1_0et")+"::OnEnable";
	end;
OnVictory:
	npctalk "Ju: This is not a game.";
	sleep 3000;
	npctalk "Ju: This is real battle.";
	sleep 3000;
	npctalk "Ju: Yeahhhh !!";
	sleep 3000;
	npctalk "Ju: The real game is battle!";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Dwigh#1	4_GEFFEN_12,{
	end;
OnActivate:
	npctalk "Dwigh: Semi-Finals huh...";
	sleep 2000;
	npctalk "Dwigh: I can see the end...";
	sleep 3000;
	npctalk "Dwigh: You must be a decent fighter, making it all the way here...";
	sleep 3000;
	npctalk "Dwigh: But I came to here for my students.";
	sleep 3000;
	npctalk "Dwigh: People who are important to me are watching this battle!";
	sleep 3000;
	npctalk "Magic Academy Student: Wow, teacher!",instance_npcname("Magic Academy Student#22");
	npctalk "Magic Academy Student: Teacher, show 'em what you've got!",instance_npcname("Magic Academy Student#3");
	npctalk "Magic Academy Student: What a great teacher, I want to be like her!",instance_npcname("Magic Academy Student#4");
	sleep 2000;
	npctalk "Magic Academy Student: I can't imagine teacher losing here~!",instance_npcname("Magic Academy Student#1");
	npctalk "Magic Academy Student: Everyone cheer loudly for our teacher!",instance_npcname("Magic Academy Student#5");
	sleep 2000;
	npctalk "Dwigh: I can't lose in front of my students!";
	sleep 2000;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	sleep 1000;
	npctalk "Magic Academy Student: Ahh!~ Go teacher~!!",instance_npcname("Magic Academy Student#5");
	sleep 1000;
	npctalk "Magic Academy Student: Go! Go! Teacher~!!",instance_npcname("Magic Academy Student#22");
	npctalk "Magic Academy Student: Teacher! She's the one~!!",instance_npcname("Magic Academy Student#3");
	npctalk "Magic Academy Student: If she can't do it~!!",instance_npcname("Magic Academy Student#4");
	npctalk "Magic Academy Student: No one can~!!",instance_npcname("Magic Academy Student#1");
	npctalk "Magic Academy Student: Teacher~!!",instance_npcname("Magic Academy Student#5");
	end;
OnDefeat:
	donpcevent instance_npcname("Dwigh#1")+"::OnEnable";
	sleep 1000;
	npctalk "Dwigh: If I had just won one more game, I could have been in the finals...";
	sleep 3000;
	npctalk "Dwigh: I'm ashamed for losing in front of my students...";
	sleep 3000;
	npctalk "Dwigh: But the competition was too strong.";
	sleep 3000;
	npctalk "Dwigh: I admit defeat.";
	sleep 3000;
	npctalk "Dwigh: According to my students, Fenrir's strength should still be above me, I wish you luck.";
	sleep 2000;
	donpcevent instance_npcname("Dwigh#1")+"::OnDisable";
	sleep 1000;
	donpcevent instance_npcname("Dwigh#z1_0et")+"::OnEnable";
	end;
OnVictory:
	npctalk "Dwigh: Ugh... It was a tough match.";
	sleep 3000;
	npctalk "Dwigh: But I am happy to have won.";
	sleep 3000;
	npctalk "Dwigh: I will do my best for my students.";
	sleep 3000;
	npctalk "Dwigh: I have just one more match to win!";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Fay Kanavian#1	4_F_GEFFEN_FAY,{
	end;
OnActivate:
	sleep 2500;
	donpcevent instance_npcname("#paycanatalk")+"::OnEnable";
	end;
OnDefeat:
	donpcevent instance_npcname("#GMTHomun")+"::OnReset";
	donpcevent instance_npcname("Fay Kanavian#1")+"::OnEnable";
	donpcevent instance_npcname("#paycanatalk2")+"::OnEnable";
	end;
OnTalk1:
	attachrid('gmt_account_id);
	sleep2 100;
	cutin "paycana_a",2;
	npctalk "Fay Kanavian: You~ I've never heard about you before~!";
	sleep2 4000;
	npctalk "Fay Kanavian: You must know, all of the spectators are cheering for me!";
	sleep2 4000;
	npctalk "Fay Kanavian: If you want to keep your life you should run now~!";
	sleep2 4000;
	npctalk "Fay Kanavian: Unless you want to experience the strength of my masterpiece, Alphonse!";
	sleep2 4000;
	npctalk "Fay Kanavian: You HAVE seen my Alphonse, right?";
	sleep2 4000;
	donpcevent instance_npcname("#Talkcontrol")+"::OnRndtalk";
	sleep2 1000;
	npctalk "Fay Kanavian: Once this match starts, you will see his full power!";
	sleep2 2000;
	cutin "",255;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	sleep2 4000;
	end;
OnTalk2:
	attachrid('gmt_account_id);
	sleep2 100;
	cutin "paycana_b ",2;
	npctalk "Fay Kanavian: I actually lost...";
	sleep2 3000;
	npctalk "Fay Kanavian: Alphonse... I gave you my heart and soul...";
	sleep2 3000;
	npctalk "Fay Kanavian: I was supposed to make it to the finals...";
	sleep2 3000;
	npctalk "Fay Kanavian: And face Fenris Fenrir...";
	sleep2 3000;
	npctalk "Fay Kanavian: I wanted to fight her so bad!";
	sleep2 2000;
	cutin "",255;
	donpcevent instance_npcname("Fay Kanavian#1")+"::OnDisable";
	sleep2 1000;
	donpcevent instance_npcname("Fay Kanavian#z1_0et")+"::OnEnable";
	end;
OnVictory:
	npctalk "Fay Kanavian: My abilities are amazing~!";
	sleep 3000;
	npctalk "Fay Kanavian: This tournament is but a game to me, and not at all important.";
	sleep 3000;
	npctalk "Fay Kanavian: But Fenrir has reached the finals by winning every single round...";
	sleep 3000;
	npctalk "Fay Kanavian: I will defeat her and win this tournament!";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,108,50,0	script	#paycanatalk	HIDDEN_WARP_NPC,25,25,{
	end;
OnTouch_:
    donpcevent instance_npcname("Fay Kanavian#1")+"::OnTalk1";
    donpcevent instance_npcname("#paycanatalk")+"::OnDisable";
    end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,108,50,0	script	#paycanatalk2	HIDDEN_WARP_NPC,25,25,{
	end;
OnTouch_:
    donpcevent instance_npcname("Fay Kanavian#1")+"::OnTalk2";
    donpcevent instance_npcname("#paycanatalk2")+"::OnDisable";
    end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,114,50,4	script	Fenrir#f	4_F_FENRIR,{
    end;
OnActivate:
	sleep 10500;
    donpcevent instance_npcname("#fenrirtalk")+"::OnEnable";
    end;
OnDefeat:
    donpcevent instance_npcname("Fenrir#f")+"::OnEnable";
	donpcevent instance_npcname("#fenrirtalk2")+"::OnEnable";
    end;
OnTalk1:
	attachrid('gmt_account_id);
	sleep2 100;
	cutin "fenrir_b",2;
	npctalk "Fenrir: The final match...";
	sleep2 1000;
	npctalk "Payon Spectator: Fenrir is going to win without a doubt~!",instance_npcname("Payon Spectator#a1");
	sleep2 1000;
	npctalk "Fenrir: I am Fenris Fenrir.";
	sleep2 1000;
	npctalk "Iris: Hey, do your best!",instance_npcname("Iris#a2");
	sleep2 2000;
	npctalk "Fenrir: You... made it here.";
	sleep2 2000;
	npctalk "Fenrir: I am sure that this will be a hard fought match.";
	sleep2 1000;
	npctalk "Lydia: Wow! I'm so excited!",instance_npcname("Lydia#a2");
	npctalk "Prontera Spectator: Fenrir, please give me an autograph!",instance_npcname("Prontera Spectator#a2");
	sleep2 2000;
	npctalk "Fenrir: I will do my best to fight you fairly.";
	sleep2 2000;
	npctalk "Fenrir: Then, should we start the final match?";
	sleep2 2000;
	cutin "",255;
	donpcevent instance_npcname("#GMTcontroller")+"::OnStart";
	sleep2 4000;
	end;
OnTalk2:
	attachrid('gmt_account_id);
	sleep2 100;
	cutin "fenrir_a",2;
	npctalk "Fenrir: Uh... I am defeated.";
	sleep2 2000;
	npctalk "Fenrir: How did you get to be so strong?";
	sleep2 3000;
	npctalk "Fenrir: I am completely defeated...";
	sleep2 3000;
	npctalk "Fenrir: This world is full of surprises...";
	sleep2 3000;
	npctalk "Fenrir: Congratulations on your victory "+'charname$+".";
	sleep2 2000;
	npctalk "Fenrir: However, next time, I won't lose!";
	sleep2 2000;
	cutin "",255;
	changequest 9307,9308;
	warp instance_mapname("1@ge_st"),109,50;
	donpcevent instance_npcname("#win")+"::OnEnable";
	donpcevent instance_npcname("#gefmagic_warp02")+"::OnEnable";
	end;
OnVictory:
	npctalk "Fenrir: Thank you~ It was a good match.";
	sleep 3000;
	npctalk "Fenrir: It feels good to be the winner.";
	sleep 3000;
	npctalk "Fenrir: I hope to see you again.";
	sleep 3000;
	npctalk "Fenrir: I have to go... My friends are waiting for me.";
	sleep 5000;
	instance_warpall instance_mapname("1@gef"),120,61;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,108,50,0	script	#fenrirtalk	HIDDEN_WARP_NPC,25,25,{
	end;
OnTouch_:
	donpcevent instance_npcname("Fenrir#f")+"::OnTalk1";
	donpcevent instance_npcname("#fenrirtalk")+"::OnDisable";
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,108,50,0	script	#fenrirtalk2	HIDDEN_WARP_NPC,25,25,{
	end;
OnTouch_:
    donpcevent instance_npcname("Fenrir#f")+"::OnTalk2";
	donpcevent instance_npcname("#fenrirtalk2")+"::OnDisable";
    end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
}

1@ge_st,1,1,0	script	#win	-1,{
	end;
OnEnable:
	donpcevent instance_npcname("Fenrir#f")+"::OnDisable";
	movenpc instance_npcname("Arhi#q1"),104,53;
	movenpc instance_npcname("Dio Anemos#q1"),100,49;
	movenpc instance_npcname("Faymont#q1"),102,46;
	movenpc instance_npcname("Ordre#q1"),104,44;
	movenpc instance_npcname("Blut Hase#q1"),112,45;
	movenpc instance_npcname("Kuro Akuma#q1"),116,46;
	movenpc instance_npcname("Ifodes#q1"),115,53;
	movenpc instance_npcname("Licheniyes#q1"),116,49;
	movenpc instance_npcname("Odoric#q1"),112,53;
	movenpc instance_npcname("Ju#q1"),109,54;
	movenpc instance_npcname("Dwigh#q1"),106,50;
	movenpc instance_npcname("Fay Kanavian#q1"),107,48;
	movenpc instance_npcname("Fenrir#q1"),112,50;
	donpcevent instance_npcname("Tournament Guide#gefMT")+"::OnEnable";
	sleep 1000;
	npctalk "Fenrir: The other contestants want to congratulate you on winning as well!",instance_npcname("Fenrir#q1");
	end;
}

1@ge_st,1,1,6	script	Arhi#q1	4_GEFFEN_02,{
	switch (rand(1,2)) {
		case 1:
			showscript "Arhi: Tsk, I will come back when I get stronger!",getnpcid(0);
			break;
		case 2:
			showscript "Arhi: Congratulations~!",getnpcid(0);
			break;
	}
	end;
}

1@ge_st,1,1,6	script	Dio Anemos#q1	4_GEFFEN_01,{
		switch (rand(1,2)) {
		case 1:
			showscript "Dio Anemos: I'm suddenly really hungry...",getnpcid(0);
			break;
		case 2:
			showscript "Dio Anemos: Congratulations~! It is your treat~!",getnpcid(0);
			break;
	}
	end;
}

1@ge_st,1,1,0	script	Faymont#q1	4_GEFFEN_04,{
	showscript "Faymont: Awesome fighting ability!",getnpcid(0);
	end;
}

1@ge_st,1,1,0	script	Ordre#q1	4_GEFFEN_05,{
	switch (rand(1,2)) {
		case 1:
			showscript "Ordre: Simply amazing!",getnpcid(0);
			break;
		case 2:
			showscript "Ordre: I can only imagine how long you have trained yourself to become this strong.",getnpcid(0);
			break;
	}
	end;
}

1@ge_st,1,1,2	script	Blut Hase#q1	4_GEFFEN_06,{
	switch (rand(1,2)) {
		case 1:
			showscript "Blut Hase: You must be famous, right?",getnpcid(0);
			break;
		case 2:
			showscript "Blut Hase: Well... Congratulations anyway...",getnpcid(0);
			break;
	}
	end;
}

1@ge_st,1,1,2	script	Kuro Akuma#q1	4_GEFFEN_07,{
	showscript "Kuro Akuma: So... very strong...",getnpcid(0);
	end;
}

1@ge_st,1,1,4	script	Ifodes#q1	4_GEFFEN_08,{
	switch (rand(1,2)) {
		case 1:
			showscript "Ifodes: Your talents suit your chivalry.",getnpcid(0);
			break;
		case 2:
			showscript "Ifodes: You were great competition. Congratulations!",getnpcid(0);
			break;
	}
	end;
}

1@ge_st,1,1,4	script	Licheniyes#q1	4_GEFFEN_09,{
	showscript "Licheniyes: Awesome victory~!",getnpcid(0);
	end;
}

1@ge_st,1,1,4	script	Odoric#q1	4_GEFFEN_10,{
	switch (rand(1,2)) {
		case 1:
			showscript "Odoric: Simply amazing.",getnpcid(0);
			break;
		case 2:
			showscript "Odoric: Congratulations on your victory~!",getnpcid(0);
			break;
	}
	end;
}

1@ge_st,1,1,4	script	Ju#q1	4_GEFFEN_11,{
	switch (rand(1,2)) {
		case 1:
			showscript "Ju: You... are... strong... I... won't... forget... you...",getnpcid(0);
			break;
		case 2:
			showscript "Ju: I've never lost before. But you are a worthy foe.",getnpcid(0);
			break;
	}
	end;
}

1@ge_st,1,1,6	script	Dwigh#q1	4_GEFFEN_12,{
	showscript "Dwigh: Really good fight, you've got exceptional strength!",getnpcid(0);
	end;
}

1@ge_st,1,1,0	script	Fay Kanavian#q1	4_F_GEFFEN_FAY,{
	switch (rand(1,2)) {
		case 1:
			showscript "Fay Kanavian: I didn't think that Fenrir would lose...",getnpcid(0);
			break;
		case 2:
			showscript "Fay Kanavian: Next time we fight, Alphonse will be stronger!",getnpcid(0);
			break;
	}
	end;
}

1@ge_st,1,1,4	script	Fenrir#q1	4_F_FENRIR,{
	switch (rand(1,2)) {
		case 1:
			showscript "Fenrir: All of my colleagues are so excited about your victory. They are eager to meet you.",getnpcid(0);
			break;
		case 2:
			showscript "Fenrir: You defeated me in a fair fight. You are very strong.",getnpcid(0);
			break;
	}
	end;
}

-	script	#EVT_GMT	-1,{
OnPCDieEvent:
	if (strcharinfo(3) == "1@ge_st" || strcharinfo(3) == instance_mapname("1@ge_st")) {
		dispbottom "You've fallen! You have 10 seconds to get up or the match will be over!";
		sleep2 10000;
		if (Hp >= 1)
			end;
		if (Hp == 0) {
			instance_warpall instance_mapname("1@ge_st"),104,50;
			donpcevent instance_npcname("#DEATHGMT")+"::OnLoseRound";
			donpcevent instance_npcname("#GMTcontroller")+"::OnStop";
			end;
		}
	}
	end;
}

1@ge_st,1,1,0	script	#DEATHGMT	-1,{
	end;
OnLoseRound:
	killmonster instance_mapname("1@ge_st"),instance_npcname("#GMTcontroller")+"::OnMyMobDead";
	donpcevent instance_npcname("#gefmagic_warp02")+"::OnEnable";
	donpcevent instance_npcname("#invisGMTquests")+"::OnEnable";
	donpcevent instance_npcname("Fenrir#e1")+"::OnEnable";
	donpcevent instance_npcname("Chaos#e1")+"::OnEnable";
	donpcevent instance_npcname("Iris#e1")+"::OnEnable";
	donpcevent instance_npcname("Lydia#e1")+"::OnEnable";
	donpcevent instance_npcname("Loki#e1")+"::OnEnable";
	switch ('GMT_1QUE) {
		case 11: .@defeat$ = "Arhi"; break;
		case 12: .@defeat$ = "Dio Anemos"; break;
		case 13:
			     if ('GMTQuest == 1) .@defeat$ = "Geffen Gangster";
			else if ('GMTQuest == 2) .@defeat$ = "Gefen Bully";
			else .@defeat$ = "Geffen Shoplifter";
			break;
		case 14: .@defeat$ = "Feymont"; break;
		case 15: .@defeat$ = "Ordre"; break;
		case 16: .@defeat$ = "Blut Hase"; break;
		case 17: .@defeat$ = "Kuro Akuma"; break;
		case 18: .@defeat$ = "Ifodes"; break;
		case 19: .@defeat$ = "Licheniyes"; break;
		case 20: .@defeat$ = "Odoric"; break;
		case 21: .@defeat$ = "Ju"; break;
		case 22:
			if ('half)
				.@defeat$ = "Dwigh";
			else
				.@defeat$ = "Fay Kanavian";
			break;
		case 23: .@defeat$ = "Fenrir"; break;
	}
	npctalk "Geffen Academy Master: "+.@defeat$+" has won the "+callfunc("F_GetNumSuffix",('GMT_1QUE - 10))+" Round of Group A!",instance_npcname("Geffen Academy Master");
	sleep 1500;
	switch ('GMT_1QUE) {
		case 11:
			donpcevent instance_npcname("Arhi#1")+"::OnEnable";
			donpcevent instance_npcname("Arhi#1")+"::OnVictory";
			break;
		case 12:
			donpcevent instance_npcname("Dio Anemos#1")+"::OnEnable";
			donpcevent instance_npcname("Dio Anemos#1")+"::OnVictory";
			break;
		case 13:
			if ('GMTQuest == 1) {
				donpcevent instance_npcname("Geffen Gangster#n1")+"::OnEnable";
				donpcevent instance_npcname("Geffen Gangster#n1")+"::OnVictory";
			} else if ('GMTQuest == 2) {
				donpcevent instance_npcname("Geffen Bully#n1")+"::OnEnable";
				donpcevent instance_npcname("Geffen Bully#n1")+"::OnVictory";
			} else {
				donpcevent instance_npcname("Geffen Shoplifter#n1")+"::OnEnable";
				donpcevent instance_npcname("Geffen Shoplifter#n1")+"::OnVictory";
			}
			break;
		case 14:
			donpcevent instance_npcname("Faymont#1")+"::OnEnable";
			donpcevent instance_npcname("Faymont#1")+"::OnVictory";
			break;
		case 15:
			donpcevent instance_npcname("Ordre#1")+"::OnEnable";
			donpcevent instance_npcname("Ordre#1")+"::OnVictory";
			break;
		case 16:
			donpcevent instance_npcname("Blut Hase#1")+"::OnEnable";
			donpcevent instance_npcname("Blut Hase#1")+"::OnVictory";
			break;
		case 17:
			donpcevent instance_npcname("Kuro Akuma#1")+"::OnEnable";
			donpcevent instance_npcname("Kuro Akuma#1")+"::OnVictory";
			break;
		case 18:
			donpcevent instance_npcname("Ifodes#1")+"::OnEnable";
			donpcevent instance_npcname("Ifodes#1")+"::OnVictory";
			break;
		case 19:
			donpcevent instance_npcname("Licheniyes#1")+"::OnEnable";
			donpcevent instance_npcname("Licheniyes#1")+"::OnVictory";
			break;
		case 20:
			donpcevent instance_npcname("Odoric#1")+"::OnEnable";
			donpcevent instance_npcname("Odoric#1")+"::OnVictory";
			break;
		case 21:
			donpcevent instance_npcname("Ju#1")+"::OnEnable";
			donpcevent instance_npcname("Ju#1")+"::OnVictory";
			break;
		case 22:
			if ('half) {
				donpcevent instance_npcname("Dwigh#1")+"::OnEnable";
				donpcevent instance_npcname("Dwigh#1")+"::OnVictory";
			} else {
				donpcevent instance_npcname("#GMTHomun")+"::OnReset";
				donpcevent instance_npcname("Fay Kanavian#1")+"::OnEnable";
				donpcevent instance_npcname("Fay Kanavian#1")+"::OnVictory";
			}
			break;
		case 23:
			donpcevent instance_npcname("Fenrir#f")+"::OnEnable";
			donpcevent instance_npcname("Fenrir#f")+"::OnVictory";
			break;
	}
	end;
}

1@gef,115,105,6	script	Loki#e1	4_M_ROKI2,{
	.@n$ = "[Loki]";
	if (checkquest(9314) != -1) {
		cutin "ep14_roki01",2;
		mes .@n$;
		mes "That's a pretty good score.";
		next;
		mes .@n$;
		mes "Please take this present.";
		setarray .items,501,502,503,504,505,506,608,607;
		getitem .items[rand(0,7)],1;
		erasequest 9314;
		cutin "",255;
		end;
	}
	cutin "ep14_roki01",2;
	mes .@n$;
	mes "Let's take a rain check on our match.";
	mes "We'll fight next time we meet...";
	close2;
	cutin "",255;
	end;

OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,117,108,6	script	Lydia#e1	4_F_LYDIA,{
	.@n$ = "[Lydia]";
	if (checkquest(9312) != -1) {
		cutin "lydia_a",2;
		mes .@n$;
		mes "Good game~!";
		next;
		mes .@n$;
		mes "I want to give you a reward even if you lost~!";
		setarray .items,501,502,503,504,505,506,608,607;
		getitem .items[rand(0,7)],1;
		erasequest 9312;
		cutin "",255;
		end;
	}
	cutin "lydia_a",2;
	mes .@n$;
	mes "I hope to see you again.";
	close2;
	cutin "",255;
	end;

OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,125,105,4	script	Iris#e1	4_F_IRIS,{
	.@n$ = "[Iris]";
	if (checkquest(9310) != -1) {
		cutin "hero_iris_01",2;
		mes .@n$;
		mes "I enjoyed watching your round~";
		mes "Bad luck this year huh?~";
		mes "Wish you luck next year.";
		next;
		mes .@n$;
		mes "Take this to cheer you up.";
		setarray .items,501,502,503,504,505,506,608,607;
		getitem .items[rand(0,7)],1;
		erasequest 9310;
		cutin "",255;
		end;
	}
	cutin "hero_iris_01",2;
	mes .@n$;
	mes "Think we'll meet again?";
	close2;
	cutin "",255;
	end;

OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,123,108,4	script	Chaos#e1	4_M_CHAOS,{
	.@n$ = "[Chaos]";
	if (checkquest(9311) != -1) {
		cutin "hero_chaos_01",2;
		mes .@n$;
		mes "That was a good match~!";
		mes "Not bad at all~!";
		next;
		mes .@n$;
		mes "You have been very impressive today.";
		mes "I want to give you a present~!";
		setarray .items,501,502,503,504,505,506,608,607;
		getitem .items[rand(0,7)],1;
		erasequest 9311;
		cutin "",255;
		end;
	}
	cutin "hero_chaos_01",2;
	mes .@n$;
	mes "I hope to see you again next time~!";
	close2;
	cutin "",255;
	end;

OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,120,108,4	script	Fenrir#e1	4_F_FENRIR,{
	.@n$ = "[Fenrir]";
	if (checkquest(9313) != -1) {
		cutin "fenrir_a",2;
		mes .@n$;
		mes "It was a good game.";
		mes "Hope you get farther next time.";
		next;
		mes .@n$;
		mes "Take this gift.";
		mes "Keep trying harder~!";
		setarray .items,501,502,503,504,505,506,608,607;
		getitem .items[rand(0,7)],1;
		erasequest 9313;
		cutin "",255;
		end;
	}
	cutin "fenrir_a",2;
	mes .@n$;
	mes "I hope to see you again adventurer!";
	close2;
	cutin "",255;
	end;

OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,159,172,6	script	Geffen Gangster#1	4_GEFFEN_14,{
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,164,175,6	duplicate(Geffen Gangster#1)	Geffen Gangster#2	4_GEFFEN_14
1@gef,160,176,6	duplicate(Geffen Gangster#1)	Geffen Gangster#3	4_GEFFEN_14
1@gef,168,170,6	duplicate(Geffen Gangster#1)	Geffen Gangster#11	4_GEFFEN_14
1@gef,167,169,6	duplicate(Geffen Gangster#1)	Geffen Gangster#22	4_GEFFEN_14
1@gef,166,168,6	duplicate(Geffen Gangster#1)	Geffen Gangster#33	4_GEFFEN_14
1@gef,170,168,4	duplicate(Geffen Gangster#1)	Iris#Gef1	4_F_IRIS
1@gef,169,167,2	duplicate(Geffen Gangster#1)	Kafra Employee#1	4_F_KAFRA4
1@gef,173,167,4	duplicate(Geffen Gangster#1)	Chaos#Gef1	4_M_CHAOS
1@gef,168,168,4	duplicate(Geffen Gangster#1)	Chaos#Gef2	4_M_CHAOS
1@gef,162,174,4	duplicate(Geffen Gangster#1)	Chaos#3	4_M_CHAOS

1@gef,166,168,0	script	#Event 1 start	HIDDEN_WARP_NPC,7,7,{
	end;
OnTouch_:
	if ('gmt_event)
		end;
	donpcevent instance_npcname("#Event 1 start")+"::OnDisable";
	donpcevent instance_npcname("Geffen Gangster#1")+"::OnEnable";
	donpcevent instance_npcname("Geffen Gangster#2")+"::OnEnable";
	donpcevent instance_npcname("Geffen Gangster#3")+"::OnEnable";
	donpcevent instance_npcname("Kafra Employee#1")+"::OnEnable";
	'GMTQuest = 1;
	//if (checkquest(9284) > -1)
	//	erasequest 9284;
	//setquest 9284;
	'gmt_timer_evt1 = 0;
	initnpctimer;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnTimer1000:
	'gmt_timer_evt1++;
	switch ('gmt_timer_evt1) {
		case 1: npctalk "Geffen Gangster: Hey girl~",instance_npcname("Geffen Gangster#1"); break;
		case 3: npctalk "Geffen Gangster: Whoo~ You have beautiful legs~!",instance_npcname("Geffen Gangster#2"); break;
		case 5: npctalk "Kafra Employee: What are you doing?",instance_npcname("Kafra Employee#1"); break;
		case 10: npctalk "Geffen Gangster: What do you think I'm doing~?",instance_npcname("Geffen Gangster#3"); break;
		case 13: npctalk "Kafra Employee: You creep! Get away~!",instance_npcname("Kafra Employee#1"); break;
		case 15: npctalk "Geffen Gangster: How dare you!",instance_npcname("Geffen Gangster#1");break;
		case 16:
			donpcevent instance_npcname("Geffen Gangster#1")+"::OnDisable";
			donpcevent instance_npcname("Geffen Gangster#2")+"::OnDisable";
			donpcevent instance_npcname("Geffen Gangster#3")+"::OnDisable";
			donpcevent instance_npcname("Geffen Gangster#11")+"::OnEnable";
			donpcevent instance_npcname("Geffen Gangster#22")+"::OnEnable";
			donpcevent instance_npcname("Geffen Gangster#33")+"::OnEnable";
			break;
		case 19: npctalk "Geffen Gangster: Wanna have some fun?",instance_npcname("Geffen Gangster#11"); break;
		case 20: npctalk "Geffen Gangster: We won't bite!",instance_npcname("Geffen Gangster#22"); break;
		case 21: npctalk "Geffen Gangster: Unless...",instance_npcname("Geffen Gangster#33"); break;
		case 23: npctalk "Kafra Employee: Help me~!!!",instance_npcname("Kafra Employee#1"); break;
		case 25: unittalk 'gmt_account_id,'charname$+": What can I do? I have to help."; break;
		case 27:
			donpcevent instance_npcname("#Event 1 start 2")+"::OnEnable";
			stopnpctimer;
			end;
	}
	initnpctimer;
	end;
}

1@gef,166,169,0	script	#Event 1 start 2	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch_:
	if ('gmt_event)
		end;
	donpcevent instance_npcname("#Event 1 start 2")+"::OnDisable";
	'gmt_event = 1;
	'gmt_timer_evt1 = 0;
	initnpctimer;
	end;
OnMobKilled:
	if (mobcount(instance_mapname("1@gef"),instance_npcname("#Event 1 start 2")+"::OnMobKilled") <= 0) {
		donpcevent instance_npcname("Geffen Gangster#1")+"::OnEnable";
		donpcevent instance_npcname("Geffen Gangster#2")+"::OnEnable";
		donpcevent instance_npcname("Geffen Gangster#3")+"::OnEnable";
		//completequest 9284;
		//setquest 9284;
		//completequest 9284;
		//setquest 9285;
		donpcevent instance_npcname("#GefGangsterEvent1")+"::OnStart";
	}
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnTimer1000:
	'gmt_timer_evt1++;
	switch ('gmt_timer_evt1) {
		case 1: unittalk 'gmt_account_id,'charname$+": You bastards! Leave her alone!"; break;
		case 3: npctalk "Geffen Gangster: What's with your attitude?",instance_npcname("Geffen Gangster#11"); break;
		case 4: npctalk "Geffen Gangster: You're such an idiot!",instance_npcname("Geffen Gangster#22"); break;
		case 5: npctalk "Geffen Gangster: Who're you calling bastards!?",instance_npcname("Geffen Gangster#33"); break;
		case 8: npctalk "Kafra Employee: Please help me~!",instance_npcname("Kafra Employee#1"); break;
		case 9:
			unittalk 'gmt_account_id,'charname$+": Time to teach them a lesson~!";
			donpcevent instance_npcname("Geffen Gangster#11")+"::OnDisable";
			donpcevent instance_npcname("Geffen Gangster#22")+"::OnDisable";
			donpcevent instance_npcname("Geffen Gangster#33")+"::OnDisable";
			monster instance_mapname("1@gef"),168,170,"Geffen Gangster",2568,1,instance_npcname("#Event 1 start 2")+"::OnMobKilled";
			monster instance_mapname("1@gef"),167,169,"Geffen Gangster",2568,1,instance_npcname("#Event 1 start 2")+"::OnMobKilled";
			monster instance_mapname("1@gef"),166,168,"Geffen Gangster",2568,1,instance_npcname("#Event 1 start 2")+"::OnMobKilled";
			stopnpctimer;
			end;
	}
	initnpctimer;
	end;
}

1@gef,1,1,0	script	#GefGangsterEvent1	-1,{
	end;
OnStart:
	'gmt_timer_evt1 = 0;
	initnpctimer;
	end;
OnTimer1000:
	'gmt_timer_evt1++;
	switch ('gmt_timer_evt1) {
		case 1:
			specialeffect EF_POTION_BERSERK,AREA,instance_npcname("Geffen Gangster#1");
			specialeffect EF_POTION_BERSERK,AREA,instance_npcname("Geffen Gangster#2");
			specialeffect EF_POTION_BERSERK,AREA,instance_npcname("Geffen Gangster#3");
			npctalk "Geffen Gangster: You're pretty good...!",instance_npcname("Geffen Gangster#1");
			npctalk "Geffen Gangster: We should stop playing around...",instance_npcname("Geffen Gangster#2");
			npctalk "Geffen Gangster: You're gonna pay the price!",instance_npcname("Geffen Gangster#3");
			break;
		case 4: npctalk "Kafra Employee: No... I'm scared...!",instance_npcname("Kafra Employee#1"); break;
		case 5:
			donpcevent instance_npcname("Iris#Gef1")+"::OnEnable";
			npctalk "Iris: Hey, you stop right there~!!",instance_npcname("Iris#Gef1");
			break;
		case 8: npctalk "Iris: That's enough.",instance_npcname("Iris#Gef1"); break;
		case 11: npctalk "Iris: I won't forgive you~!",instance_npcname("Iris#Gef1"); break;
		case 13: specialeffect EF_POTION1,AREA,instance_npcname("Iris#Gef1"); break;
		case 14:
			npctalk "Geffen Gangster: Why hello there, are you scared?",instance_npcname("Geffen Gangster#1");
			npctalk "Geffen Gangster: You're pretty cute. Do you want to play with us too?",instance_npcname("Geffen Gangster#2");
			npctalk "Geffen Gangster: Aren't I your type babe?~",instance_npcname("Geffen Gangster#3");
			break;
		case 18:
			donpcevent instance_npcname("Geffen Gangster#1")+"::OnDisable";
			donpcevent instance_npcname("Geffen Gangster#2")+"::OnDisable";
			donpcevent instance_npcname("Geffen Gangster#3")+"::OnDisable";
			donpcevent instance_npcname("Geffen Gangster#11")+"::OnEnable";
			donpcevent instance_npcname("Geffen Gangster#22")+"::OnEnable";
			donpcevent instance_npcname("Geffen Gangster#33")+"::OnEnable";
			break;
		case 22: mapannounce instance_mapname("1@gef"),"Stop right there! Jerks!",0x00ebff; break;
		case 23: donpcevent instance_npcname("Chaos#Gef1")+"::OnEnable"; break;
		case 25: specialeffect EF_POTION_CON,AREA,instance_npcname("Chaos#Gef1"); break;
		case 26: npctalk "Chaos: Are you clowns harassing Iris?",instance_npcname("Chaos#Gef1"); break;
		case 30: npctalk "Chaos: I think I need to teach someone a lesson!",instance_npcname("Chaos#Gef1"); break;
		case 31:
			specialeffect EF_LOCKON,AREA,instance_npcname("Geffen Gangster#11");
			specialeffect EF_LOCKON,AREA,instance_npcname("Geffen Gangster#22");
			specialeffect EF_LOCKON,AREA,instance_npcname("Geffen Gangster#33");
			npctalk "Chaos: Come and fight me!",instance_npcname("Chaos#Gef2");
			donpcevent instance_npcname("Chaos#Gef1")+"::OnDisable";
			donpcevent instance_npcname("Chaos#Gef2")+"::OnEnable";
			break;
		case 34:
			npctalk "Chaos: Bash~!!!",instance_npcname("Chaos#Gef2");
			specialeffect EF_HIT2,AREA,instance_npcname("Chaos#Gef2");
			specialeffect EF_BASH,AREA,instance_npcname("Geffen Gangster#11");
			specialeffect EF_BASH,AREA,instance_npcname("Geffen Gangster#22");
			specialeffect EF_BASH,AREA,instance_npcname("Geffen Gangster#33");
			donpcevent instance_npcname("Geffen Gangster#11")+"::OnDisable";
			donpcevent instance_npcname("Geffen Gangster#22")+"::OnDisable";
			donpcevent instance_npcname("Geffen Gangster#33")+"::OnDisable";
			break;
		case 35:
			donpcevent instance_npcname("Geffen Gangster#1")+"::OnEnable";
			donpcevent instance_npcname("Geffen Gangster#2")+"::OnEnable";
			donpcevent instance_npcname("Geffen Gangster#3")+"::OnEnable";
			break;
		case 36:
			npctalk "Geffen Gangster: Ugh...",instance_npcname("Geffen Gangster#1");
			npctalk "Geffen Gangster: Strong...",instance_npcname("Geffen Gangster#2");
			npctalk "Geffen Gangster: Too strong...",instance_npcname("Geffen Gangster#3");
			break;
		case 39:
			donpcevent instance_npcname("Chaos#Gef2")+"::OnDisable";
			donpcevent instance_npcname("Chaos#3")+"::OnEnable";
			break;
		case 42:
			npctalk "Chaos: I'm not done yet!! Magnum Break~!",instance_npcname("Chaos#3");
			specialeffect EF_MAGNUMBREAK,AREA,instance_npcname("Geffen Gangster#1");
			specialeffect EF_MAGNUMBREAK,AREA,instance_npcname("Geffen Gangster#2");
			specialeffect EF_MAGNUMBREAK,AREA,instance_npcname("Geffen Gangster#3");
			break;
		case 43:
			specialeffect EF_SUI_EXPLOSION,AREA,instance_npcname("Geffen Gangster#1");
			specialeffect EF_SUI_EXPLOSION,AREA,instance_npcname("Geffen Gangster#2");
			specialeffect EF_SUI_EXPLOSION,AREA,instance_npcname("Geffen Gangster#3");
			donpcevent instance_npcname("Geffen Gangster#1")+"::OnDisable";
			donpcevent instance_npcname("Geffen Gangster#2")+"::OnDisable";
			donpcevent instance_npcname("Geffen Gangster#3")+"::OnDisable";
			break;
		case 45: donpcevent instance_npcname("Chaos#3")+"::OnDisable"; break;
		case 46:
			donpcevent instance_npcname("Chaos#Gef1")+"::OnEnable";
			stopnpctimer;
			attachrid('gmt_account_id);
			cutin "hero_iris_01",2;
			mes "[Iris]";
			mes "Are you okay?";
			mes "There have been so many jerks everywhere we go...";
			next;
			cutin "",255;
			mes "[Kafra]";
			mes "Thanks for helping me out.";
			mes "Who are you?";
			next;
			cutin "hero_iris_01",2;
			mes "[Iris]";
			mes "I am Iris~";
			mes "I am travelling with my good friend Chaos~!";
			next;
			mes "[Iris]";
			mes "I am not the one you should thank.";
			mes "Thank that adventurer, "+'charname$+".";
			mes "It could have been much worse.";
			next;
			cutin "",255;
			mes "[Kafra]";
			mes "Thank you "+'charname$+".";
			mes "You saved me.";
			next;
			cutin "hero_iris_01",2;
			mes "[Iris]";
			mes "It's pretty rare to meet someone as righteous as "+'charname$+".";
			next;
			mes "[Iris]";
			mes "I'm on my way to see the Geffen Magic Tournament with Chaos.";
			mes "Are you on your way there too, "+'charname$+"?";
			next;
			cutin "hero_chaos_01",2;
			mes "[Chaos]";
			mes "Yes, you seem strong enough to be in the Tournament.";
			next;
			mes "[Chaos]";
			mes "Just know that Fenrir plans on joining as well, so it won't be that easy.";
			next;
			mes "[Chaos]";
			mes "This is my favorite magic buff scroll, so take it as a token of our appreciation.";
			sc_start SC_GEFFEN_MAGIC3,3600000,10;
			specialeffect2 EF_POTION_BERSERK;
			next;
			mes "[Chaos]";
			mes "It will be useful in the Magic Tournament.";
			mes "Let's go Iris~!";
			mes "It's going to start soon~!";
			next;
			cutin "hero_iris_01",2;
			mes "[Iris]";
			mes "Yes~! Go "+'charname$+"~";
			mes "Kafra, wish us luck~!";
			mes "Do your best "+'charname$+".";
			close2;
			cutin "",255;
			donpcevent instance_npcname("Iris#Gef1")+"::OnDisable";
			donpcevent instance_npcname("Chaos#Gef1")+"::OnDisable";
			donpcevent instance_npcname("Kafra Employee#1")+"::OnDisable";
			sleep2 2000;
			unittalk 'gmt_account_id,'charname$+": They sure are brave...";
			sleep2 2000;
			unittalk 'gmt_account_id,'charname$+": Should we apply for the Magic Tournament now?";
			end;
	}
	initnpctimer;
	end;
}

1@gef,75,172,4	duplicate(Geffen Gangster#1)	Geffen Bully#1	4_GEFFEN_13
1@gef,76,170,4	duplicate(Geffen Gangster#1)	Geffen Bully#2	4_GEFFEN_13
1@gef,73,173,4	duplicate(Geffen Gangster#1)	Geffen Bully#3	4_GEFFEN_13
1@gef,68,171,4	duplicate(Geffen Gangster#1)	Geffen Bully#11	4_GEFFEN_13
1@gef,70,171,4	duplicate(Geffen Gangster#1)	Geffen Bully#22	4_GEFFEN_13
1@gef,70,169,4	duplicate(Geffen Gangster#1)	Geffen Bully#33	4_GEFFEN_13
1@gef,70,167,0	duplicate(Geffen Gangster#1)	Magic Academy Student#11	2_F_MAGICMASTER
1@gef,73,170,0	duplicate(Geffen Gangster#1)	Magic Academy Student#22	2_F_MAGICMASTER
1@gef,69,168,0	duplicate(Geffen Gangster#1)	Loki#1	4_M_ROKI2
1@gef,69,170,0	duplicate(Geffen Gangster#1)	Loki#2	4_M_ROKI2
1@gef,67,170,0	duplicate(Geffen Gangster#1)	Loki#3	4_M_ROKI2
1@gef,68,169,0	duplicate(Geffen Gangster#1)	Fenrir#1	4_F_FENRIR

1@gef,72,169,0	script	#Event 2 start	HIDDEN_WARP_NPC,7,7,{
	end;
OnTouch_:
	if ('gmt_event)
		end;
	donpcevent instance_npcname("Geffen Bully#1")+"::OnEnable";
	donpcevent instance_npcname("Geffen Bully#2")+"::OnEnable";
	donpcevent instance_npcname("Geffen Bully#3")+"::OnEnable";
	donpcevent instance_npcname("Magic Academy Student#11")+"::OnEnable";
	donpcevent instance_npcname("#Event 2 start")+"::OnDisable";
	//setquest 9286;
	'gmt_timer_evt2 = 2;
	'GMTQuest = 2;
	initnpctimer;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnTimer1000:
	'gmt_timer_evt2++;
	switch ('gmt_timer_evt2) {
		case 5: npctalk "Geffen Bully: Hey you! Yeah you~",instance_npcname("Geffen Bully#1"); break;
		case 7: npctalk "Magic Academy Student: Yea... yeah? Me...? Do you mean me?",instance_npcname("Magic Academy Student#11"); break;
		case 8: npctalk "Geffen Bully: Yes, you! Come over here!",instance_npcname("Geffen Bully#2"); break;
		case 9: npctalk "Geffen Bully: Hurry! You have 3 seconds!",instance_npcname("Geffen Bully#3"); break;
		case 11: npctalk "Geffen Bully: 3...",instance_npcname("Geffen Bully#3"); break;
		case 12: npctalk "Geffen Bully: 2...",instance_npcname("Geffen Bully#3"); break;
		case 13: npctalk "Geffen Bully: 1...",instance_npcname("Geffen Bully#3"); break;
		case 14:
			donpcevent instance_npcname("Magic Academy Student#11")+"::OnDisable";
			donpcevent instance_npcname("Magic Academy Student#22")+"::OnEnable";
			break;
		case 17: npctalk "Geffen Bully: You! How much zeny do you have?",instance_npcname("Geffen Bully#1"); break;
		case 20: npctalk "Magic Academy Student: What... huh?",instance_npcname("Magic Academy Student#22"); break;
		case 23: npctalk "Geffen Bully: Did I stutter? I said, how much zeny do you have! You idiot!",instance_npcname("Geffen Bully#2"); break;
		case 27: npctalk "Magic Academy Student: I don't have any zeny... I'm but a student...",instance_npcname("Magic Academy Student#22"); break;
		case 30: npctalk "Geffen Bully: Do I have to beat the zeny out of you?!",instance_npcname("Geffen Bully#3"); break;
		case 33: npctalk "Magic Academy Student: Ugh... I told you, I don't have any zeny!",instance_npcname("Magic Academy Student#22"); break;
		case 36:
			unittalk 'gmt_account_id,'charname$+": What should I do? I have to help!";
			donpcevent instance_npcname("#Event 2 start 2")+"::OnEnable";
			stopnpctimer;
			end;
	}
	initnpctimer;
	end;
}

1@gef,72,170,0	script	#Event 2 start 2	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch_:
	if ('gmt_event)
		end;
	donpcevent instance_npcname("#Event 2 start 2")+"::OnDisable";
	'gmt_timer_evt2 = 0;
	'gmt_event = 1;
	initnpctimer;
	end;
OnMobKilled:
	if (mobcount(instance_mapname("1@gef"),instance_npcname("#Event 2 start 2")+"::OnMobKilled") <= 0) {
		donpcevent instance_npcname("Geffen Bully#1")+"::OnEnable";
		donpcevent instance_npcname("Geffen Bully#2")+"::OnEnable";
		donpcevent instance_npcname("Geffen Bully#3")+"::OnEnable";
		//completequest 9286;
		//setquest 9286;
		//completequest 9286;
		//setquest 9287;
		sleep 500;
		specialeffect EF_POTION_BERSERK,AREA,instance_npcname("Geffen Bully#1");
		specialeffect EF_POTION_BERSERK,AREA,instance_npcname("Geffen Bully#2");
		specialeffect EF_POTION_BERSERK,AREA,instance_npcname("Geffen Bully#3");
		$gmt_timer_evt2 = -1;
		while ($gmt_timer_evt2 < 50) {
			$gmt_timer_evt2++;
			switch ($gmt_timer_evt2) {
				case 0:
					npctalk "Geffen Bully: He has surprisingly good skills.",instance_npcname("Geffen Bully#1");
					npctalk "Geffen Bully: This isn't good...",instance_npcname("Geffen Bully#2");
					npctalk "Geffen Bully: 1 slap for 10 wins. No... You get 10 slaps for 1 win.",instance_npcname("Geffen Bully#3");
					break;
				case 3:
					donpcevent instance_npcname("Magic Academy Student#22")+"::OnDisable";
					donpcevent instance_npcname("Magic Academy Student#11")+"::OnEnable";
					sleep 500;
					npctalk "Magic Academy Student: I'm scared~! Help me...",instance_npcname("Magic Academy Student#11");
					break;
				case 6: donpcevent instance_npcname("Fenrir#1")+"::OnEnable"; break;
				case 7: npctalk "Fenrir: Hello. Are you going to stop now?",instance_npcname("Fenrir#1"); break;
				case 10: npctalk "Fenrir: This is really uncomfortable. I can't just sit back and watch.",instance_npcname("Fenrir#1"); break;
				case 13:
					npctalk "Fenrir: Stop harassing her. I won't forgive you.",instance_npcname("Fenrir#1");
					specialeffect EF_POTION1,AREA,instance_npcname("Fenrir#1");
					break;
				case 15: npctalk "Geffen Bully: Hey~ You look rich, you must have a lot of zeny right?",instance_npcname("Geffen Bully#1"); break;
				case 17: npctalk "Geffen Bully: What's a rich girl like you doing around here?~",instance_npcname("Geffen Bully#2"); break;
				case 19: npctalk "Geffen Bully: Hey! Rich girl~! How much zeny do you got?",instance_npcname("Geffen Bully#3"); break;
				case 22:
					donpcevent instance_npcname("Geffen Bully#1")+"::OnDisable";
					donpcevent instance_npcname("Geffen Bully#2")+"::OnDisable";
					donpcevent instance_npcname("Geffen Bully#3")+"::OnDisable";
					donpcevent instance_npcname("Geffen Bully#11")+"::OnEnable";
					donpcevent instance_npcname("Geffen Bully#22")+"::OnEnable";
					donpcevent instance_npcname("Geffen Bully#33")+"::OnEnable";
					break;
				case 23:
					emotion e_gasp,getnpcid(0,instance_npcname("Fenrir#1"));
					mapannounce instance_mapname("1@gef"),"Take your dirty hands off of me.",0x00ebff;
					break;
				case 25:
					donpcevent instance_npcname("Loki#1")+"::OnEnable";
					sleep 500;
					specialeffect EF_POISONREACT,AREA,instance_npcname("Loki#1");
					sleep 1500;
					specialeffect EF_SONICBLOW,AREA,instance_npcname("Loki#1");
					npctalk "Loki: Hmph!",instance_npcname("Loki#1");
					sleep 500;
					specialeffect EF_VENOMDUST,AREA,instance_npcname("Loki#1");
					specialeffect EF_SONICBLOWHIT,AREA,instance_npcname("Geffen Bully#33");
					specialeffect EF_SONICBLOW2,AREA,instance_npcname("Geffen Bully#33");
					sleep 330;
					specialeffect EF_NAPALMBEAT,AREA,instance_npcname("Geffen Bully#33");
					donpcevent instance_npcname("Geffen Bully#33")+"::OnDisable";
					donpcevent instance_npcname("Geffen Bully#3")+"::OnEnable";
					break;
				case 26: npctalk "Geffen Bully: Yikes!",instance_npcname("Geffen Bully#3"); break;
				case 27:
					donpcevent instance_npcname("Loki#1")+"::OnDisable";
					donpcevent instance_npcname("Loki#2")+"::OnEnable";
					sleep 750;
					npctalk "Loki: Take this.",instance_npcname("Loki#2");
					sleep 500;
					specialeffect EF_STRIPARMOR,AREA,instance_npcname("Geffen Bully#22");
					specialeffect EF_SONICBLOWHIT,AREA,instance_npcname("Geffen Bully#22");
					specialeffect EF_SONICBLOW2,AREA,instance_npcname("Geffen Bully#22");
					sleep 330;
					specialeffect EF_NAPALMBEAT,AREA,instance_npcname("Geffen Bully#22");
					donpcevent instance_npcname("Geffen Bully#22")+"::OnDisable";
					donpcevent instance_npcname("Geffen Bully#2")+"::OnEnable";
					break;
				case 28:
					npctalk "Geffen Bully: Ugh, uuurgh! What the?!",instance_npcname("Geffen Bully#2");
					donpcevent instance_npcname("Loki#2")+"::OnDisable";
					donpcevent instance_npcname("Loki#3")+"::OnEnable";
					sleep 750;
					npctalk "Loki: Change your mind yet?",instance_npcname("Loki#3");
					sleep 500;
					specialeffect EF_STRIPSHIELD,AREA,instance_npcname("Geffen Bully#11");
					specialeffect EF_SONICBLOWHIT,AREA,instance_npcname("Geffen Bully#11");
					specialeffect EF_SONICBLOW2,AREA,instance_npcname("Geffen Bully#11");
					sleep 330;
					specialeffect EF_NAPALMBEAT,AREA,instance_npcname("Geffen Bully#11");
					donpcevent instance_npcname("Geffen Bully#11")+"::OnDisable";
					donpcevent instance_npcname("Geffen Bully#1")+"::OnEnable";
					break;
				case 29: npctalk "Geffen Bully: Ugh, urgh, urgh! GAAAAAAH!!",instance_npcname("Geffen Bully#1"); break;
				case 31: npctalk "Loki: If you don't want to taste my Katar, leave now.",instance_npcname("Loki#3"); break;
				case 34: npctalk "Loki: Get out of my sight.",instance_npcname("Loki#3"); break;
				case 36: npctalk "Geffen Bully: Oh, oh! Time to go!",instance_npcname("Geffen Bully#1"); break;
				case 38: npctalk "Geffen Bully: Please... spare my life...",instance_npcname("Geffen Bully#2"); break;
				case 40: npctalk "Geffen Bully: Let's get away!~!!!!!",instance_npcname("Geffen Bully#3"); break;
				case 41:
					npctalk "Loki: You have 10 seconds.",instance_npcname("Loki#3");
					specialeffect EF_SONICBLOW,AREA,instance_npcname("Loki#3");
					break;
				case 43:
					specialeffect EF_SLOWPOISON,AREA,instance_npcname("Loki#3");
					npctalk "Loki: 10... 9...",instance_npcname("Loki#3");
					sleep 500;
					specialeffect EF_STRIPWEAPON,AREA,instance_npcname("Loki#3");
					specialeffect EF_POISONREACT,AREA,instance_npcname("Loki#3");
					specialeffect EF_POISONREACT2,AREA,instance_npcname("Loki#3");
					break;
				case 45:
					specialeffect EF_ENCHANTPOISON,AREA,instance_npcname("Loki#3");
					sleep 500;
					emotion e_gg,getnpcid(0,instance_npcname("Loki#3"));
					npctalk "Loki: 3... 2...",instance_npcname("Loki#3");
					sleep 500;
					npctalk "Geffen Bully: What?! You went from from 9 to 3 seconds!!",instance_npcname("Geffen Bully#1");
					npctalk "Geffen Bully: Screw this, let's run~!!!!!!!!!",instance_npcname("Geffen Bully#2");
					npctalk "Geffen Bully: I will have my revenge~!!",instance_npcname("Geffen Bully#3");
					break;
				case 46:
					specialeffect EF_SOULBREAKER,AREA,instance_npcname("Loki#3");
					specialeffect EF_VENOMDUST,AREA,instance_npcname("Loki#3");
					npctalk "Loki: 1...",instance_npcname("Loki#3");
					sleep 330;
					donpcevent instance_npcname("Geffen Bully#1")+"::OnDisable";
					donpcevent instance_npcname("Geffen Bully#2")+"::OnDisable";
					donpcevent instance_npcname("Geffen Bully#3")+"::OnDisable";
					break;
				case 48:
					donpcevent instance_npcname("Loki#3")+"::OnDisable";
					donpcevent instance_npcname("Loki#1")+"::OnEnable";
					break;
				case 49:
					attachrid('gmt_account_id);
					cutin "fenrir_a",2;
					mes "[Fenrir]";
					mes "Are you okay?";
					mes "Where are all these punks coming from anyways?";
					next;
					cutin "",255;
					mes "[Magic Academy Student]";
					mes "Thanks for helping me.";
					mes "Who are you?";
					next;
					cutin "fenrir_a",2;
					mes "[Fenrir]";
					mes "I am Fenris Fenrir.";
					next;
					mes "[Fenrir]";
					mes "Thank "+'charname$+".";
					mes "It would have been much worse if "+('sex?"he":"she")+" hadn't shown up.";
					next;
					cutin "",255;
					mes "[Magic Academy Student]";
					mes "Thank you so much "+'charname$+".";
					mes "You saved me.";
					next;
					cutin "fenrir_a",2;
					mes "[Fenrir]";
					mes "You don't meet many people like "+'charname$+" these days.";
					mes "You're a good person.";
					next;
					mes "[Fenrir]";
					mes "I was on the way to register for the Geffen Magic Tournament with Loki.";
					next;
					mes "[Fenrir]";
					mes "I have a feeling that you will register too "+'charname$+".";
					mes "I hope to meet you in the finals of the Tournament.";
					next;
					cutin "ep14_roki01",2;
					mes "[Loki]";
					mes "Oh yeah?";
					mes 'charname$+" is going to register?";
					mes "That's interesting.";
					next;
					mes "[Loki]";
					mes "I have a spare magic buff scroll.";
					mes "I will give it to you as a present.";
					sc_start SC_GEFFEN_MAGIC2,3600000,10;
					specialeffect2 EF_POTION_BERSERK;
					next;
					mes "[Loki]";
					mes "I doubt that you can beat Fenrir at the Tournament.";
					mes "Her fighting prowess is unmatched.";
					next;
					mes "[Loki]";
					mes "Fenrir, it's time to register.";
					mes "Let's hurry.";
					next;
					cutin "fenrir_a",2;
					mes "[Fenrir]";
					mes "Yes~! I almost forgot.";
					mes "It was nice meeting you "+'charname$+"~!";
					next;
					mes "[Fenrir]";
					mes "I hope to meet you in combat soon.";
					close2;
					cutin "",255;
					donpcevent instance_npcname("Fenrir#1")+"::OnDisable";
					donpcevent instance_npcname("Loki#1")+"::OnDisable";
					sleep2 1000;
					donpcevent instance_npcname("Magic Academy Student#11")+"::OnDisable";
					sleep2 3000;
					unittalk 'gmt_account_id,'charname$+": It was fun meeting Fenrir.";
					sleep2 2000;
					unittalk 'gmt_account_id,'charname$+": I should register for the Magic Tournament.";
					end;
			}
			sleep 1000;
		}
	}
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnTimer1000:
	'gmt_timer_evt2++;
	switch ('gmt_timer_evt2) {
		case 2: unittalk 'gmt_account_id,'charname$+": You! Bullies! Stop!"; break;
		case 3: npctalk "Geffen Bully: You ready for a beating?",instance_npcname("Geffen Bully#1"); break;
		case 4: npctalk "Geffen Bully: I've been waiting to have some fun...",instance_npcname("Geffen Bully#2"); break;
		case 5: npctalk "Geffen Bully: Say hello to my little friends!",instance_npcname("Geffen Bully#3"); break;
		case 7: npctalk "Magic Academy Student: Please help me~",instance_npcname("Magic Academy Student#22"); break;
		case 9:
			unittalk 'gmt_account_id,'charname$+": I have to help!";
			attachrid('gmt_account_id);
			specialeffect2 EF_LOCKON;
			detachrid;
			monster instance_mapname("1@gef"),75,172,"Geffen Bully",2567,1,instance_npcname("#Event 2 start 2")+"::OnMobKilled";
			monster instance_mapname("1@gef"),76,170,"Geffen Bully",2567,1,instance_npcname("#Event 2 start 2")+"::OnMobKilled";
			monster instance_mapname("1@gef"),73,173,"Geffen Bully",2567,1,instance_npcname("#Event 2 start 2")+"::OnMobKilled";
			donpcevent instance_npcname("Geffen Bully#1")+"::OnDisable";
			donpcevent instance_npcname("Geffen Bully#2")+"::OnDisable";
			donpcevent instance_npcname("Geffen Bully#3")+"::OnDisable";
			stopnpctimer;
			end;
	}
	initnpctimer;
	end;
}

1@gef,111,146,4	duplicate(Geffen Gangster#1)	Geffen Resident#1	1_F_02
1@gef,106,141,4	duplicate(Geffen Gangster#1)	Geffen Resident#2	1_F_02
1@gef,104,141,6	duplicate(Geffen Gangster#1)	Lydia#1	4_F_LYDIA

1@gef,114,143,0	script	#Event 3 start	HIDDEN_WARP_NPC,5,5,{
	end;
OnTouch_:
	if ('gmt_event)
		end;
	donpcevent instance_npcname("#Event 3 start")+"::OnDisable";
	donpcevent instance_npcname("Geffen Resident#1")+"::OnEnable";
	//setquest 9288;
	'gmt_timer_evt3 = 0;
	initnpctimer;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnEnable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnTimer1000:
	'gmt_timer_evt3++;
	switch ('gmt_timer_evt3) {
		case 1: npctalk "Geffen Resident: A thief...! A thief~!!",instance_npcname("Geffen Resident#1"); break;
		case 3: npctalk "Geffen Resident: Help me~!! Someone stole my paycheck!",instance_npcname("Geffen Resident#1"); break;
		case 6:
			donpcevent instance_npcname("Geffen Shoplifter#1")+"::OnEnable";
			'gmt_chase = 1;
			break;
		case 8: npctalk "Geffen Shoplifter: Damn... Someone saw me...",instance_npcname("Geffen Shoplifter#1"); break;
		case 11:
			unittalk 'gmt_account_id,'charname$+": What can I do? I gotta help.";
			stopnpctimer;
			end;
	}
	initnpctimer;
	end;
}

1@gef,108,139,6	script	Geffen Shoplifter#1	4_GEFFEN_03,4,4,{
OnTouch_:
	if ('gmt_event)
		end;
	if ('gmt_chase != 1)
		end;
	'gmt_event = 1;
	unittalk 'gmt_account_id,'charname$+": Thief! Give that zeny back!! Don't move!!";
	sleep2 3000;
	npctalk "Geffen Shoplifter: Threatening me?~!! Yeah, boo hoo! You really scare me~!!",instance_npcname("Geffen Shoplifter#1");
	sleep2 2000;
	npctalk "Geffen Shoplifter: Catch me if you can~!!",instance_npcname("Geffen Shoplifter#1");
	sleep2 2000;
	npctalk "Geffen Resident: Please find my paycheck...",instance_npcname("Geffen Resident#1");
	sleep2 3000;
	unittalk 'gmt_account_id,'charname$+": I have you now!";
	donpcevent instance_npcname("Geffen Shoplifter#1")+"::OnDisable";
	donpcevent instance_npcname("Geffen Shoplifter#2")+"::OnEnable";
	'gmt_chase = 2;
	'GMTQuest = 3;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,107,126,4	script	Geffen Shoplifter#2	4_GEFFEN_03,4,4,{
	end;
OnTouch_:
	if ('gmt_chase != 2)
		end;
	if (Zeny > 2000)
		Zeny -= 2000;
	npctalk "Geffen Shoplifter: Are you following me? Thanks for the 2,000 zeny~!",instance_npcname("Geffen Shoplifter#2");
	specialeffect2 EF_STEAL;
	sleep2 3000;
	unittalk 'gmt_account_id,'charname$+": Hey~ Stop right there! Thief!";
	sleep2 3000;
	donpcevent instance_npcname("Geffen Shoplifter#2")+"::OnDisable";
	donpcevent instance_npcname("Geffen Shoplifter#3")+"::OnEnable";
	'gmt_chase = 3;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,111,118,4	script	Geffen Shoplifter#3	4_GEFFEN_03,4,4,{
	end;
OnTouch_:
	if ('gmt_chase != 3)
		end;
	if (Zeny > 2000)
		Zeny -= 2000;
	npctalk "Geffen Shoplifter: Woohoo~ Catch me if you can~! 4,000 large! Easy~!",instance_npcname("Geffen Shoplifter#3");
	specialeffect2 EF_STEAL;
	sleep2 3000;
	unittalk 'gmt_account_id,'charname$+": I will beat you down once I catch you!";
	sleep2 3000;
	donpcevent instance_npcname("Geffen Shoplifter#3")+"::OnDisable";
	donpcevent instance_npcname("Geffen Shoplifter#11")+"::OnEnable";
	'gmt_chase = 11;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,123,111,4	script	Geffen Shoplifter#11	4_GEFFEN_03,4,4,{
	end;
OnTouch_:
	if ('gmt_chase != 11)
		end;
	if (Zeny > 2000)
		Zeny -= 2000;
	npctalk "Geffen Shoplifter: You're annoying me~! I like it! 6,000 zeny~!",instance_npcname("Geffen Shoplifter#11");
	specialeffect2 EF_STEAL;
	sleep2 3000;
	unittalk 'gmt_account_id,'charname$+": Stop right there you filthy thief!";
	sleep2 3000;
	donpcevent instance_npcname("Geffen Shoplifter#11")+"::OnDisable";
	donpcevent instance_npcname("Geffen Shoplifter#22")+"::OnEnable";
	'gmt_chase = 22;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,129,121,4	script	Geffen Shoplifter#22	4_GEFFEN_03,4,4,{
	end;
OnTouch_:
	if ('gmt_chase != 22)
		end;
	if (Zeny > 2000)
		Zeny -= 2000;
	npctalk "Geffen Shoplifter: Calling me a rat? Yoink~ 8,000 zeny~!",instance_npcname("Geffen Shoplifter#22");
	specialeffect2 EF_STEAL;
	sleep2 3000;
	unittalk 'gmt_account_id,'charname$+": Would you stop?!";
	sleep2 3000;
	donpcevent instance_npcname("Geffen Shoplifter#22")+"::OnDisable";
	donpcevent instance_npcname("Geffen Shoplifter#33")+"::OnEnable";
	'gmt_chase = 33;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
}

1@gef,114,137,4	script	Geffen Shoplifter#33	4_GEFFEN_03,4,4,{
	end;
OnTouch_:
	if ('gmt_chase != 33)
		end;
	if (Zeny > 2000)
		Zeny -= 2000;
	npctalk "Geffen Shoplifter: Stop following me. It's driving me crazy! 10,000 zeny~!",instance_npcname("Geffen Shoplifter#33");
	specialeffect2 EF_STEAL;
	sleep2 3000;
	unittalk 'gmt_account_id,'charname$+": You can't run away anymore. I've got you now!";
	sleep2 3000;
	npctalk "Geffen Shoplifter: You really piss me off! I'm gonna have to beat you down!",instance_npcname("Geffen Shoplifter#33");
	sleep2 3000;
	donpcevent instance_npcname("Geffen Shoplifter#33")+"::OnDisable";
	monster instance_mapname("1@gef"),114,137,"Geffen Shoplifter",2914,1,instance_npcname("Geffen Shoplifter#33")+"::OnMobKilled";
	end;
OnMobKilled:
	donpcevent instance_npcname("Geffen Shoplifter#1")+"::OnEnable";
	//completequest 9288;
	//setquest 9288; // State = 1,Time = 0
	//completequest 9288;
	//setquest 9289; // State = 1,Time = 0
	'gmt_timer_evt3 = 0;
	initnpctimer;
	end;
OnInstanceInit:
	donpcevent instance_npcname(strnpcinfo(0))+"::OnDisable";
	end;
OnEnable:
	hideoffnpc instance_npcname(strnpcinfo(0));
	end;
OnDisable:
	hideonnpc instance_npcname(strnpcinfo(0));
	end;
OnTimer1000:
	'gmt_timer_evt3++;
	switch ('gmt_timer_evt3) {
		case 1: specialeffect EF_PATTACK,AREA,instance_npcname("Geffen Shoplifter#1"); break;
		case 4: npctalk "Geffen Shoplifter: Ugh, I shouldn't fight toe to toe with anyone...",instance_npcname("Geffen Shoplifter#1"); break;
		case 7: unittalk 'gmt_account_id,'charname$+": Don't want to be in a fair fight, huh thief?"; break;
		case 10: npctalk "Geffen Shoplifter: Umm... stealing zeny is my job~ I did nothing wrong~!",instance_npcname("Geffen Shoplifter#1"); break;
		case 13: unittalk 'gmt_account_id,'charname$+": What? You're stealing from needy people."; break;
		case 16: npctalk "Geffen Shoplifter: Well, it has been fun~! I'm outta here~",instance_npcname("Geffen Shoplifter#1"); break;
		case 17: unittalk 'gmt_account_id,'charname$+": Hey! Give back what you stole thief!"; break;
		case 20: npctalk "Geffen Shoplifter: Hahaha~! You'll get nothing~!",instance_npcname("Geffen Shoplifter#1"); break;
		case 22: donpcevent instance_npcname("Geffen Shoplifter#1")+"::OnDisable"; break;
		case 24:
			attachrid('gmt_account_id);
			mes "[Geffen Resident]";
			mes "My monthly salary...";
			mes "What am I gonna do?";
			mes "I have to eat...";
			next;
			mes "[Geffen Resident]";
			mes "You're not a thief are you?";
			mes "I don't know what to do about my zeny being stolen.";
			next;
			mes "[Lydia]";
			mes "Woo, yeah, what a day~";
			mes "It seems like all these thieves in Geffen are rich.";
			mes "They may be good at stealing but they're easy to steal from too.";
			cutin "lydia_a",0;
			next;
			donpcevent instance_npcname("Lydia#1")+"::OnEnable";
			mes "[Lydia]";
			mes "Hey, why are you crying?";
			mes "What happened?";
			next;
			mes "You tell Lydia about the shoplifters.";
			cutin "",255;
			next;
			mes "[Geffen Resident]";
			mes "What am I going to do?";
			mes "*sobbing*";
			next;
			mes "[Lydia]";
			mes "(I stole this envelope from one of those thug-looking guys)";
			mes "....";
			mes "How much zeny was stolen from you?";
			cutin "lydia_a",0;
			next;
			mes "[Geffen Resident]";
			mes "1,000,000 zeny!";
			mes "It's everything that I had.";
			cutin "",255;
			next;
			mes "[Lydia]";
			mes "Whoa! That's the same amount as what's in this envelope that I stole from that shoplifter.";
			cutin "lydia_a",0;
			next;
			mes "[Lydia]";
			mes "Maybe this is what you are looking for?";
			mes "Check it out!";
			next;
			mes "[Geffen Resident]";
			mes "Let me see...";
			mes "Wait, this has to be my zeny!";
			mes "Thank you very much for finding it!";
			cutin "",255;
			next;
			donpcevent instance_npcname("Geffen Resident#1")+"::OnDisable";
			donpcevent instance_npcname("Geffen Resident#2")+"::OnEnable";
			mes "[Lydia]";
			mes "Well... Um, that is...";
			mes "I didn't say I was gonna give it back to you...";
			cutin "lydia_a",0;
			next;
			mes "[Geffen Resident]";
			mes "Thank you very much!!";
			mes "I will never forget your kindness~!";
			mes "I'm putting it in the bank right now!";
			mes "Have a good day~!!! Zap~!!";
			cutin "",255;
			next;
			donpcevent instance_npcname("Geffen Resident#2")+"::OnDisable";
			mes "[Lydia]";
			mes "......";
			mes "I guess... I did a good thing...?";
			cutin "lydia_a",0;
			next;
			mes "You tell Lydia about your stolen zeny.";
			cutin "",255;
			next;
			mes "[Lydia]";
			mes "So, are you asking me for more zeny?";
			mes "Zeny doesn't grow on trees you know!";
			cutin "lydia_a",0;
			next;
			mes "[Lydia]";
			mes "I mean it is hers so...";
			mes "I'll just consider it a donation to the Geffen Magic Tournament.";
			next;
			mes "[Lydia]";
			mes "Well, I can't give away any Tournament participants any zeny...";
			next;
			mes "[Lydia]";
			mes "I stole this magic scroll from another thief, so don't worry about taking it.";
			sc_start SC_GEFFEN_MAGIC1,3600000,10;
			specialeffect2 EF_POTION_BERSERK;
			next;
			mes "[Lydia]";
			mes "I need to get to the Geffen Magic Tournament.";
			mes "Gotta go!";
			close2;
			cutin "",255;
			donpcevent instance_npcname("Lydia#1")+"::OnDisable";
			sleep2 2000;
			unittalk 'gmt_account_id,'charname$+": She disappeared before I could thank her...";
			sleep2 3000;
			unittalk 'gmt_account_id,'charname$+": She seems like a good person...";
			sleep2 3000;
			unittalk 'gmt_account_id,'charname$+": Well, time to register for the Magic Tournament.";
			stopnpctimer;
			end;
	}
	initnpctimer;
	end;
}
